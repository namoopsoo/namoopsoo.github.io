<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><title>michal.piekarczyk.xyz</title><meta name=viewport content="width=device-width,minimum-scale=1"><meta name=description content><meta name=generator content="Hugo 0.83.0"><meta name=ROBOTS content="NOINDEX, NOFOLLOW"><link rel=stylesheet href=/ananke/dist/main.css_5c99d70a7725bacd4c701e995b969fea.css><link href=/handy/index.xml rel=alternate type=application/rss+xml title=michal.piekarczyk.xyz><link href=/handy/index.xml rel=feed type=application/rss+xml title=michal.piekarczyk.xyz><meta property="og:title" content="Handies"><meta property="og:description" content><meta property="og:type" content="website"><meta property="og:url" content="https://michal.piekarczyk.xyz/handy/"><meta itemprop=name content="Handies"><meta itemprop=description content><meta name=twitter:card content="summary"><meta name=twitter:title content="Handies"><meta name=twitter:description content></head><body class="ma0 avenir bg-near-white"><header><div class="pb3-m pb6-l bg-black"><nav class="pv3 ph3 ph4-ns" role=navigation><div class="flex-l justify-between items-center center"><a href=/ class="f3 fw2 hover-white no-underline white-90 dib">michal.piekarczyk.xyz</a><div class="flex-l items-center"></div></div></nav><div class="tc-l pv3 ph3 ph4-ns"><h1 class="f2 f-subheadline-l fw2 light-silver mb0 lh-title">Handies</h1></div></div></header><main class=pb7 role=main><article class="pa3 pa4-ns nested-copy-line-height nested-img"><section class="cf ph3 ph5-l pv3 pv4-l f4 tc-l center measure-wide lh-copy mid-gray"></section><section class="flex-ns flex-wrap justify-around mt5"><div class="relative w-100 w-30-l mb4 bg-white"><div class="relative w-100 mb4 bg-white nested-copy-line-height"><div class="bg-white mb3 pa4 gray overflow-hidden"><span class="f6 db">Handy</span><h1 class="f3 near-black"><a href=https://michal.piekarczyk.xyz/handy/clojure/unit-testing/ class="link black dim"></a></h1><div class="nested-links f5 lh-copy nested-copy-line-height">hmm&mldr; using is so the library is built in, but you still have to start useing it.. boot.user=> (is (= 4 (+ 2 2))) java.lang.RuntimeException: Unable to resolve symbol: is in this context clojure.lang.Compiler$CompilerException: java.lang.RuntimeException: Unable to resolve symbol: is in this context, compiling:(/var/folders/7_/sbz867_n7bdcdtdry2mdz1z00000gn/T/boot.user2780891586981282255.clj:1:1) boot.user=> boot.user=> boot.user=> (use 'clojure.test) nil boot.user=> (is (= 4 (+ 2 2))) true lein test Running all tests in a file lein test module/blah/test_file.</div></div></div></div><div class="relative w-100 w-30-l mb4 bg-white"><div class="relative w-100 mb4 bg-white nested-copy-line-height"><div class="bg-white mb3 pa4 gray overflow-hidden"><span class="f6 db">Handy</span><h1 class="f3 near-black"><a href=https://michal.piekarczyk.xyz/handy/docker/hmm/ class="link black dim"></a></h1><div class="nested-links f5 lh-copy nested-copy-line-height">Do a build login from shell, $(aws --profile my-local-aws-profile ecr get-login --no-include-email --region us-east-1) build, docker build -t name-of-image -f path/to/Dockerfile path/to/docker/context Run your container # run using an image name, # note that -v takes an absolute path... docker run -i -t -v $(pwd)/local/path:/docker/path &lt;name-of-image>:&lt;tag> # or with a specific image id... say "ad6576e" docker run -d=false -i -t ad6576e If you need your container to have your aws creds Nice hack is to map the &ldquo;root&rdquo; user of your container .</div></div></div></div><div class="relative w-100 w-30-l mb4 bg-white"><div class="relative w-100 mb4 bg-white nested-copy-line-height"><div class="bg-white mb3 pa4 gray overflow-hidden"><span class="f6 db">Handy</span><h1 class="f3 near-black"><a href=https://michal.piekarczyk.xyz/handy/eda/f_test_statistic/ class="link black dim"></a></h1><div class="nested-links f5 lh-copy nested-copy-line-height">F test statistic to evaluate the features Also good example at the source Here below, I had a DataFrame , df with some features, f1, f2, f3, f4 and target , y , Based on my results, f3 is great, f4 barely better than random numbers. from sklearn.feature_selection import f_regression, mutual_info_regression def evaluate_feature(df, feature, target): X = np.array(df[feature].tolist()) num_rows = X.shape[0] X = np.reshape(X, (num_rows, 1)) y = df[target].</div></div></div></div><div class="relative w-100 w-30-l mb4 bg-white"><div class="relative w-100 mb4 bg-white nested-copy-line-height"><div class="bg-white mb3 pa4 gray overflow-hidden"><span class="f6 db">Handy</span><h1 class="f3 near-black"><a href=https://michal.piekarczyk.xyz/handy/eda/variable_independence_techniques/ class="link black dim"></a></h1><div class="nested-links f5 lh-copy nested-copy-line-height">Appreciate this post on helping to choose between a few available tests in determining if there are meaningful relationships between feature data. In particular,
ANOVA compares two variables, where one is categorical (binning is helpful here) and one is continuous. Chi-square is useful for two categorical comparing two cateorical varables, on the other hand. And Pearson Correlation can be used between two continiuous variables But the caveat is that this test assumes both variables are normally distributed And outliers should be chopped off with some preprocessing.</div></div></div></div><div class="relative w-100 w-30-l mb4 bg-white"><div class="relative w-100 mb4 bg-white nested-copy-line-height"><div class="bg-white mb3 pa4 gray overflow-hidden"><span class="f6 db">Handy</span><h1 class="f3 near-black"><a href=https://michal.piekarczyk.xyz/handy/model/loss/ class="link black dim"></a></h1><div class="nested-links f5 lh-copy nested-copy-line-height">Loss functions vs Metric functions I like the phrasing in this SO answer, that loss functions are optimized directly when training but that metrics are optimized indirectly. I was trying to figure out last year why functions commonly used as metrics (F1 and AUC) are not listed in the tensor flow keras loss functions . I did however earlier try using F1 as a loss function when trying to understand my particular problem.</div></div></div></div><div class="relative w-100 w-30-l mb4 bg-white"><div class="relative w-100 mb4 bg-white nested-copy-line-height"><div class="bg-white mb3 pa4 gray overflow-hidden"><span class="f6 db">Handy</span><h1 class="f3 near-black"><a href=https://michal.piekarczyk.xyz/handy/model/uncertainty/ class="link black dim"></a></h1><div class="nested-links f5 lh-copy nested-copy-line-height">mean/std technique For xgboost/random forest type models per this article , the proposed idea is to use the preditions of all the trees as the prediction space or a kind of an uncertainty interval. I wonder if we can say predictions that a model is more certain about have a tighter distribution of predictions. And conversely that a model is unsure about its predictions if the distribution of predictions is wide.</div></div></div></div><div class="relative w-100 w-30-l mb4 bg-white"><div class="relative w-100 mb4 bg-white nested-copy-line-height"><div class="bg-white mb3 pa4 gray overflow-hidden"><span class="f6 db">Handy</span><h1 class="f3 near-black"><a href=https://michal.piekarczyk.xyz/handy/model/variance_inflation_factor/ class="link black dim"></a></h1><div class="nested-links f5 lh-copy nested-copy-line-height">Initial stab on interpreting Variance inflation factor (VIF) So far my skim on https://en.wikipedia.org/wiki/Variance_inflation_factor and https://en.wikipedia.org/wiki/Multicollinearity tells me that high Variance Inflation Factor (VIF) indicates high multicolinearity w/ one or more other independent variables. And that’s bad because
(a) when building a linear model (at least using ordinary least squares (OLS) , not yet sure if this is still true if you use regularization ) , the coefficients calculated for the independent variables can change “erratically” given slightly different data .</div></div></div></div><div class="relative w-100 w-30-l mb4 bg-white"><div class="relative w-100 mb4 bg-white nested-copy-line-height"><div class="bg-white mb3 pa4 gray overflow-hidden"><span class="f6 db">Handy</span><h1 class="f3 near-black"><a href=https://michal.piekarczyk.xyz/handy/plot/ class="link black dim"></a></h1><div class="nested-links f5 lh-copy nested-copy-line-height">histogram overlays # Nice technique from https://srome.github.io/Covariate-Shift,-i.e.-Why-Prediction-Quality-Can-Degrade-In-Production-and-How-To-Fix-It/ # ... put two histograms on same plot ... def produce_overlayed_hists_for_col_dfs(col, dfs): fig = plt.figure(figsize=(12,12)) ax = fig.add_subplot(121) ax.hist(dfs[0][1][col], color='r', alpha=0.2, bins=50) ax.hist(dfs[1][1][col], color='b', alpha=0.2, bins=50) ax.set(title=f'{dfs[0][0]} (red) vs {dfs[1][0]} (blue)', ylabel=col) Basic goal looks like the below.
sparse diagonal x axis ticks import matplotlib.pyplot as plt import pandas as pd import datetime def make_xtick_labels(x, step=5): '''Given x, step the labels every &lt;step> Aka, take every &lt;step>th x label ''' x_ticks = [i for i in range(len(x)) if i % step == 0] x_labels = [x[i] for i in x_ticks] return x_ticks, x_labels Did not add an example x , y yet, but showing an example where x contains dates and y is numeric.</div></div></div></div><div class="relative w-100 w-30-l mb4 bg-white"><div class="relative w-100 mb4 bg-white nested-copy-line-height"><div class="bg-white mb3 pa4 gray overflow-hidden"><span class="f6 db">Handy</span><h1 class="f3 near-black"><a href=https://michal.piekarczyk.xyz/handy/python/fano/ class="link black dim"></a></h1><div class="nested-links f5 lh-copy nested-copy-line-height">import numpy as np from bokeh.plotting import figure, show, output_file def doplot(x, y, **figure_kwargs): N = x.shape[0] radii = np.array([0.1,]*N) # print 'DEBUG, ', radii[:4], ', ', N colors = [ "#%02x%02x%02x" % (int(r), int(g), 150) for r, g in zip(50+2*x, 30+2*y) ] TOOLS="hover,crosshair,pan,wheel_zoom,zoom_in,zoom_out,box_zoom,undo,redo,reset,tap,save,box_select,poly_select,lasso_select," p = figure(tools=TOOLS, **figure_kwargs) p.scatter(x, y, radius=radii, fill_color=colors, fill_alpha=0.6, line_color=None) output_file("color_scatter.html") show(p) # open a browser def make_data(N=100, trials=1000, minmax=(0, 1)): a, b = minmax data = [[sum(vec), fano(vec)] for vec in [a + (b - a)*np.</div></div></div></div><div class="relative w-100 w-30-l mb4 bg-white"><div class="relative w-100 mb4 bg-white nested-copy-line-height"><div class="bg-white mb3 pa4 gray overflow-hidden"><span class="f6 db">Handy</span><h1 class="f3 near-black"><a href=https://michal.piekarczyk.xyz/handy/python/poormans_pomodoro/ class="link black dim"></a></h1><div class="nested-links f5 lh-copy nested-copy-line-height">import sys import time import datetime file = sys.stderr def log(logfile, tag): now = datetime.datetime.now().strftime('%Y-%m-%d%H:%M EST') with open(logfile, 'a') as fd: fd.write(f'{now} {tag}\n') def do(minutes, logfile, tag): log(logfile, f'{tag} start') seconds = minutes*60 for i in range(seconds): file.flush() #s = str(i%60).zfill(2) file.write(f'\r{i//60}:{str(i%60).zfill(2)}') time.sleep(1) log(logfile, f'{tag} end') And choose any logfile location and any tag ..</div></div></div></div></section><ul class=pagination><li class=page-item><a href=/handy/ class=page-link aria-label=First><span aria-hidden=true>&#171;&#171;</span></a></li><li class=page-item><a href=/handy/page/2/ class=page-link aria-label=Previous><span aria-hidden=true>&#171;</span></a></li><li class=page-item><a class=page-link href=/handy/>1</a></li><li class=page-item><a class=page-link href=/handy/page/2/>2</a></li><li class="page-item active"><a class=page-link href=/handy/page/3/>3</a></li><li class=page-item><a class=page-link href=/handy/page/4/>4</a></li><li class=page-item><a href=/handy/page/4/ class=page-link aria-label=Next><span aria-hidden=true>&#187;</span></a></li><li class=page-item><a href=/handy/page/4/ class=page-link aria-label=Last><span aria-hidden=true>&#187;&#187;</span></a></li></ul></article></main><footer class="bg-black bottom-0 w-100 pa3" role=contentinfo><div class="flex justify-between"><a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href=https://michal.piekarczyk.xyz/>&copy; michal.piekarczyk.xyz 2021</a><div></div></div></footer></body></html>