<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>michal.piekarczyk.xyz</title><meta name=keywords content><meta name=description content="histogram overlays # Nice technique from https://srome.github.io/Covariate-Shift,-i.e.-Why-Prediction-Quality-Can-Degrade-In-Production-and-How-To-Fix-It/ # ... put two histograms on same plot ... def produce_overlayed_hists_for_col_dfs(col, dfs): fig = plt.figure(figsize=(12,12)) ax = fig.add_subplot(121) ax.hist(dfs[0][1][col], color='r', alpha=0.2, bins=50) ax.hist(dfs[1][1][col], color='b', alpha=0.2, bins=50) ax.set(title=f'{dfs[0][0]} (red) vs {dfs[1][0]} (blue)', ylabel=col) Basic goal looks like the below.
sparse diagonal x axis ticks import matplotlib.pyplot as plt import pandas as pd import datetime def make_xtick_labels(x, step=5): '''Given x, step the labels every <step> Aka, take every <step>th x label ''' x_ticks = [i for i in range(len(x)) if i % step == 0] x_labels = [x[i] for i in x_ticks] return x_ticks, x_labels Did not add an example x , y yet, but showing an example where x contains dates and y is numeric."><meta name=author content="Michal Piekarczyk"><link rel=canonical href=https://michal.piekarczyk.xyz/handy/plot/><link crossorigin=anonymous href=/assets/css/stylesheet.4c73b1b942ee612f2f6a56636bd60cf62223b2cdb42d501875d67bb952acf3c0.css integrity="sha256-THOxuULuYS8valZja9YM9iIjss20LVAYddZ7uVKs88A=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://michal.piekarczyk.xyz/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://michal.piekarczyk.xyz/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://michal.piekarczyk.xyz/favicon-32x32.png><link rel=apple-touch-icon href=https://michal.piekarczyk.xyz/apple-touch-icon.png><link rel=mask-icon href=https://michal.piekarczyk.xyz/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-74MK08REDT"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-74MK08REDT",{anonymize_ip:!1})}</script><meta property="og:title" content><meta property="og:description" content="histogram overlays # Nice technique from https://srome.github.io/Covariate-Shift,-i.e.-Why-Prediction-Quality-Can-Degrade-In-Production-and-How-To-Fix-It/ # ... put two histograms on same plot ... def produce_overlayed_hists_for_col_dfs(col, dfs): fig = plt.figure(figsize=(12,12)) ax = fig.add_subplot(121) ax.hist(dfs[0][1][col], color='r', alpha=0.2, bins=50) ax.hist(dfs[1][1][col], color='b', alpha=0.2, bins=50) ax.set(title=f'{dfs[0][0]} (red) vs {dfs[1][0]} (blue)', ylabel=col) Basic goal looks like the below.
sparse diagonal x axis ticks import matplotlib.pyplot as plt import pandas as pd import datetime def make_xtick_labels(x, step=5): '''Given x, step the labels every <step> Aka, take every <step>th x label ''' x_ticks = [i for i in range(len(x)) if i % step == 0] x_labels = [x[i] for i in x_ticks] return x_ticks, x_labels Did not add an example x , y yet, but showing an example where x contains dates and y is numeric."><meta property="og:type" content="article"><meta property="og:url" content="https://michal.piekarczyk.xyz/handy/plot/"><meta property="article:section" content="handy"><meta property="og:site_name" content="michal.piekarczyk.xyz"><meta name=twitter:card content="summary"><meta name=twitter:title content><meta name=twitter:description content="histogram overlays # Nice technique from https://srome.github.io/Covariate-Shift,-i.e.-Why-Prediction-Quality-Can-Degrade-In-Production-and-How-To-Fix-It/ # ... put two histograms on same plot ... def produce_overlayed_hists_for_col_dfs(col, dfs): fig = plt.figure(figsize=(12,12)) ax = fig.add_subplot(121) ax.hist(dfs[0][1][col], color='r', alpha=0.2, bins=50) ax.hist(dfs[1][1][col], color='b', alpha=0.2, bins=50) ax.set(title=f'{dfs[0][0]} (red) vs {dfs[1][0]} (blue)', ylabel=col) Basic goal looks like the below.
sparse diagonal x axis ticks import matplotlib.pyplot as plt import pandas as pd import datetime def make_xtick_labels(x, step=5): '''Given x, step the labels every <step> Aka, take every <step>th x label ''' x_ticks = [i for i in range(len(x)) if i % step == 0] x_labels = [x[i] for i in x_ticks] return x_ticks, x_labels Did not add an example x , y yet, but showing an example where x contains dates and y is numeric."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Handies","item":"https://michal.piekarczyk.xyz/handy/"},{"@type":"ListItem","position":2,"name":"","item":"https://michal.piekarczyk.xyz/handy/plot/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"","name":"","description":"histogram overlays # Nice technique from https://srome.github.io/Covariate-Shift,-i.e.-Why-Prediction-Quality-Can-Degrade-In-Production-and-How-To-Fix-It/ # ... put two histograms on same plot ... def produce_overlayed_hists_for_col_dfs(col, dfs): fig = plt.figure(figsize=(12,12)) ax = fig.add_subplot(121) ax.hist(dfs[0][1][col], color=\u0026#39;r\u0026#39;, alpha=0.2, bins=50) ax.hist(dfs[1][1][col], color=\u0026#39;b\u0026#39;, alpha=0.2, bins=50) ax.set(title=f\u0026#39;{dfs[0][0]} (red) vs {dfs[1][0]} (blue)\u0026#39;, ylabel=col) Basic goal looks like the below.\nsparse diagonal x axis ticks import matplotlib.pyplot as plt import pandas as pd import datetime def make_xtick_labels(x, step=5): \u0026#39;\u0026#39;\u0026#39;Given x, step the labels every \u0026lt;step\u0026gt; Aka, take every \u0026lt;step\u0026gt;th x label \u0026#39;\u0026#39;\u0026#39; x_ticks = [i for i in range(len(x)) if i % step == 0] x_labels = [x[i] for i in x_ticks] return x_ticks, x_labels Did not add an example x , y yet, but showing an example where x contains dates and y is numeric.","keywords":[],"articleBody":"histogram overlays # Nice technique from https://srome.github.io/Covariate-Shift,-i.e.-Why-Prediction-Quality-Can-Degrade-In-Production-and-How-To-Fix-It/ # ... put two histograms on same plot ... def produce_overlayed_hists_for_col_dfs(col, dfs): fig = plt.figure(figsize=(12,12)) ax = fig.add_subplot(121) ax.hist(dfs[0][1][col], color='r', alpha=0.2, bins=50) ax.hist(dfs[1][1][col], color='b', alpha=0.2, bins=50) ax.set(title=f'{dfs[0][0]} (red) vs {dfs[1][0]} (blue)', ylabel=col) Basic goal looks like the below.\nsparse diagonal x axis ticks import matplotlib.pyplot as plt import pandas as pd import datetime def make_xtick_labels(x, step=5): '''Given x, step the labels every Aka, take every th x label ''' x_ticks = [i for i in range(len(x)) if i % step == 0] x_labels = [x[i] for i in x_ticks] return x_ticks, x_labels Did not add an example x , y yet, but showing an example where x contains dates and y is numeric. x = ? y = ? fig = plt.figure(figsize=(12,4)) ax = fig.add_subplot(111) ax.plot(y) x_ticks, x_labels = make_xtick_labels(x, step=20) ax.set_xticks(x_ticks) ax.set_xticklabels(x_labels, rotation=-45) fig.show() Multiple time plots and fill nulls with zeroes! Need to fill the nulls, otherwise the behavior can be weird. Here, have a df with timestamp and label , that is sparse, (meaning there are missing rows) import matplotlib.pyplot as plt import pandas as pd import datetime import random def random_df(size=500): X = [random.random() for _ in range(size)] vec = [] for (i, x) in enumerate(X): vec.extend([{ \"label\": (\"one\" if x \u003c= 0.33 else (\"two\" if 0.33 \u003c x \u003c= 0.66 else \"three\")), \"timestamp\": datetime.date(2021, 1, 1) + datetime.timedelta(days=1*i) } for _ in range(random.randint(0, 50)) ]) return pd.DataFrame.from_records(vec) def fill_empties(statsdf): statsdf = statsdf.copy() for x in statsdf[\"date\"].unique().tolist(): for label in statsdf.label.unique().tolist(): if statsdf[(statsdf.date == x) \u0026 (statsdf.label == label)].empty: statsdf = pd.concat([statsdf, pd.DataFrame.from_records([{\"date\": x, \"label\": label, \"count\": 0}])], ignore_index=True ) statsdf = statsdf.sort_values(by=[\"date\", \"label\"]) return statsdf def plot_trends(df, out_loc): statsdf = df.groupby(by=['date', 'label']).size().reset_index().rename(columns={0: \"count\"}) statsdf = fill_empties(statsdf) fig = plt.figure(figsize=(12,4)) ax = fig.add_subplot(111) x = statsdf.date.unique().tolist() x_ticks, x_labels = make_xtick_labels(x, step=3) for label in statsdf.label.unique().tolist(): x = statsdf[statsdf.label == label]['date'].tolist() y = statsdf[statsdf.label == label]['count'].tolist() ax.plot(x, y, label=label) ax.set_xticks(x_ticks) ax.set_xticklabels(x_labels, rotation=-45) ax.legend() print('saving to ', out_loc) pylab.savefig(out_loc) pylab.close() # df = random_df(100) df[\"date\"] = df[\"timestamp\"].map(lambda x:x.strftime(\"%m-%d\")) workdir = \"some_folder\" out_loc = f\"{workdir}/trends.png\" plot_trends(df, out_loc) Heatmaps are nice plt.figure(figsize=(10,10)) plt.imshow(bitmap) plt.colorbar() plt.grid(False) plt.show() using np.histogram and quantiles to spot check bimodal distributions I had this use case where I wanted to collect walltime from a service, from a dataset where a bimodal distribution was basically a given. I wanted thea mean of the second distribution. Instead of trying to use clustering analysis like dbscan which would have probably worked, I just started collecting the time series np.histogram and quantile data and I was able to visually inspect / prove that the median is a good enough statistic in this case, without too much extra data preprocessing required! sampling data from athena every 7 days , here are two examples below. supporting codes… (I didnt add code for daa.run_it but basically that just pulls data into a dataframe with a column backend_processing_time that is being used here. And make_query just makes a query for a particular date to pull that data. So nothing really special about those. They can be replaced with any particular method of gathering data.) import datetime from tqdm import tqdm d1 = datetime.date(2019, 1, 1) d2 = datetime.date(2020, 7, 1) dd = ddu.range_dates(d1, d2, 7) # outvec = [] for dt in tqdm(dd): query = make_query(dt) athenadf = daa.run_it(query, query_name='Unsaved') hist = np.histogram(athenadf.backend_processing_time.tolist(), bins=10, range=None) mean = np.mean(athenadf.backend_processing_time.tolist()) quantiles = get_quantiles(athenadf.backend_processing_time.tolist()) outvec.append({'hist': hist, 'quantiles': quantiles, 'date': dt.strftime('%Y-%m-%d'), 'mean': mean}) import numpy as np import matplotlib.pyplot as plt def get_quantiles(unsorted): data = sorted(unsorted) minimum = data[0] Q1 = np.percentile(data, 25, interpolation = 'midpoint') median = np.median(data) Q3 = np.percentile(data, 75, interpolation = 'midpoint') maximum = data[-1] return [minimum, Q1, median, Q3, maximum] def show_da_stats(bundle): H, bins = bundle['hist'] quantiles = bundle['quantiles'] # plt.plot(x[1][:-1], x[0], drawstyle='steps') #print(H, bins) #print(quantiles) plt.scatter(quantiles, [1, 1, 1, 1, 1]) plt.axvline(quantiles[1], label='q:25%') plt.axvline(quantiles[2], label='q:50%') plt.axvline(quantiles[3], label='q:75%') plt.title(f\"walltime histogram at {bundle['date']}\") plt.plot(bins, np.insert(H, 0, H[0]), drawstyle='steps', color='green') plt.grid(True) plt.legend() plt.show() bundle = outvec[0] show_da_stats(bundle) Nice how you can save figures from ipython if you need to import pylab import matplotlib.pyplot as plt plt.hist([1,2,3,4,1,2,3,4,1,2,1,2,2], bins=50) plt.title('Histogram blah') out_loc = '/your/location.blah.png' print('saving to ', out_loc) pylab.savefig(out_loc) pylab.close() Running this in a jupyter notebook (NOTE: this data is from one of the Keras Hello World datasets) , per below import matplotlib.pyplot as plt image = [[0, 0, 0, 0, 0, 0, 0, 0, 33, 96, 175, 156, 64, 14, 54, 137, 204, 194, 102, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 73, 186, 177, 183, 175, 188, 232, 255, 223, 219, 194, 179, 186, 213, 146, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 35, 163, 140, 150, 152, 150, 146, 175, 175, 173, 171, 156, 152, 148, 129, 156, 140, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 150, 142, 140, 152, 160, 156, 146, 142, 127, 135, 133, 140, 140, 137, 133, 125, 169, 75, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 54, 167, 146, 129, 142, 137, 137, 131, 148, 148, 133, 131, 131, 131, 125, 140, 140, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 110, 188, 133, 146, 152, 133, 125, 127, 119, 129, 133, 119, 140, 131, 150, 14, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 221, 158, 137, 135, 123, 110, 110, 114, 108, 112, 117, 127, 142, 77, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 4, 0, 25, 158, 137, 125, 119, 119, 110, 117, 117, 110, 119, 127, 144, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 123, 156, 129, 112, 110, 102, 112, 100, 121, 117, 129, 114, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 125, 169, 127, 119, 106, 108, 104, 94, 121, 114, 129, 91, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 2, 0, 98, 171, 129, 112, 104, 114, 106, 102, 112, 104, 133, 64, 0, 4, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 2, 0, 66, 173, 135, 129, 98, 100, 119, 102, 108, 98, 135, 60, 0, 4, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 2, 0, 56, 171, 135, 127, 100, 108, 117, 85, 106, 110, 135, 66, 0, 4, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 52, 150, 129, 110, 100, 91, 102, 94, 83, 104, 123, 66, 0, 4, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 2, 0, 66, 167, 140, 148, 148, 127, 137, 152, 146, 146, 148, 96, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 45, 123, 94, 104, 96, 119, 121, 106, 98, 112, 87, 114, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 106, 89, 58, 50, 37, 50, 66, 56, 50, 75, 75, 137, 22, 0, 2, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 2, 0, 29, 148, 114, 106, 125, 89, 100, 133, 117, 131, 131, 131, 125, 112, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 100, 106, 114, 91, 137, 62, 102, 131, 89, 135, 112, 131, 108, 135, 37, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 146, 100, 108, 98, 144, 62, 106, 131, 87, 133, 104, 160, 117, 121, 68, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 33, 121, 108, 96, 100, 140, 71, 106, 127, 85, 140, 104, 150, 140, 114, 89, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 62, 119, 112, 102, 110, 137, 75, 106, 144, 81, 144, 108, 117, 154, 117, 104, 18, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 66, 121, 102, 112, 117, 131, 73, 104, 156, 77, 137, 135, 83, 179, 129, 121, 35, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 85, 127, 81, 125, 133, 119, 79, 100, 169, 83, 129, 175, 60, 163, 135, 146, 39, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 106, 129, 62, 140, 144, 108, 85, 83, 158, 85, 129, 175, 48, 146, 133, 135, 64, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 117, 119, 79, 140, 152, 102, 89, 110, 137, 96, 150, 196, 83, 144, 135, 133, 77, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 154, 121, 87, 140, 154, 112, 94, 52, 142, 100, 83, 152, 85, 160, 133, 100, 12, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 4, 0, 2, 0, 35, 4, 33, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]] plt.figure() plt.imshow(train_images[3]) plt.colorbar() plt.grid(False) plt.show() And wow that displays… And the matplot grid , wow this is cool too Example code from this tutorial According to help(plt.subplot) , plt.subplot(5, 5, i) below is an instruction to place the ith thing, within a 5x5 grid, so basically the count starts at 0 from the upper left corner and spreads the grid as if it were a tape, from 0 to 5*5 - 1 plt.figure(figsize=(10,10)) for i in range(25): plt.subplot(5,5,i+1) plt.xticks([]) plt.yticks([]) plt.grid(False) plt.imshow(train_images[i]) # , cmap=plt.cm.binary plt.xlabel(class_names[train_labels[i]]) plt.show() Obtaining image data from tensorflow import keras fashion_mnist = keras.datasets.fashion_mnist (train_images, train_labels), (test_images, test_labels) = fashion_mnist.load_data() image = train_mages[3] Plot colors With tips from here # print(plt.style.available) # ['Solarize_Light2', '_classic_test_patch', 'bmh', 'classic', 'dark_background', 'fast', 'fivethirtyeight', 'ggplot', 'grayscale', 'seaborn', 'seaborn-bright', 'seaborn-colorblind', 'seaborn-dark', 'seaborn-dark-palette', 'seaborn-darkgrid', 'seaborn-deep', 'seaborn-muted', 'seaborn-notebook', 'seaborn-paper', 'seaborn-pastel', 'seaborn-poster', 'seaborn-talk', 'seaborn-ticks', 'seaborn-white', 'seaborn-whitegrid', 'tableau-colorblind10'] fig = plt.figure(figsize=(6, 6)) fig.patch.set_facecolor('xkcd:mint green') ax = fig.add_subplot(111, ) ax.hist([1, 2, 1, 2, 2, 3, 4, 5, 6], bins=2, ) ax.set_facecolor('xkcd:salmon') #plt.show(transparent=False) #help(ax) # set_subplotspec For the background this also helped.. ( per here ) # print(plt.style.available) # ['Solarize_Light2', '_classic_test_patch', 'bmh', 'classic', 'dark_background', 'fast', 'fivethirtyeight', 'ggplot', 'grayscale', 'seaborn', 'seaborn-bright', 'seaborn-colorblind', 'seaborn-dark', 'seaborn-dark-palette', 'seaborn-darkgrid', 'seaborn-deep', 'seaborn-muted', 'seaborn-notebook', 'seaborn-paper', 'seaborn-pastel', 'seaborn-poster', 'seaborn-talk', 'seaborn-ticks', 'seaborn-white', 'seaborn-whitegrid', 'tableau-colorblind10'] with plt.style.context('fivethirtyeight'): fig = plt.figure(figsize=(6, 6)) ax = fig.add_subplot(111, ) ax.hist([1, 2, 1, 2, 2, 3, 4, 5, 6], bins=2, ) more colors How to display a png from a file from IPython.display import Image, display loc = 'somefile.png' display(Image(filename=loc)) Prevent some parts of figure from getting cut off This bbox_inches='tight' option really helps with plt.style.context('fivethirtyeight'): plt.plot(np.random.randint(0, 100, size=100), np.random.randint(0, 100, size=100)) plt.title('blah title') out_loc = 'blah.png' print('saving to ', out_loc) pylab.savefig(out_loc, bbox_inches='tight') pylab.close() broken bar chart intended for gantt and I suspect useful as a waterfall for walltimes Borrowing this beautiful example from Geeks for Geeks # Declaring a figure \"gnt\" fig, gnt = plt.subplots() # Setting Y-axis limits gnt.set_ylim(0, 50) # Setting X-axis limits gnt.set_xlim(0, 160) # Setting labels for x-axis and y-axis gnt.set_xlabel('seconds since start') gnt.set_ylabel('Processor') # Setting ticks on y-axis gnt.set_yticks([15, 25, 35]) # Labelling tickes of y-axis gnt.set_yticklabels(['1', '2', '3']) # Setting graph attribute gnt.grid(True) # Declaring a bar in schedule gnt.broken_barh([(40, 50)], (30, 9), facecolors =('tab:orange')) # Declaring multiple bars in at same level and same width gnt.broken_barh([(110, 10), (150, 10)], (10, 9), facecolors ='tab:blue') gnt.broken_barh([(10, 50), (100, 20), (130, 10)], (20, 9), facecolors =('tab:red')) loc = 'gantt.png' plt.savefig(loc) ","wordCount":"1903","inLanguage":"en","datePublished":"0001-01-01T00:00:00Z","dateModified":"0001-01-01T00:00:00Z","author":{"@type":"Person","name":"Michal Piekarczyk"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://michal.piekarczyk.xyz/handy/plot/"},"publisher":{"@type":"Organization","name":"michal.piekarczyk.xyz","logo":{"@type":"ImageObject","url":"https://michal.piekarczyk.xyz/favicon.ico"}}}</script></head><body class=dark id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://michal.piekarczyk.xyz/ accesskey=h title="michal.piekarczyk.xyz (Alt + H)">michal.piekarczyk.xyz</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://michal.piekarczyk.xyz/post/ title=posts><span>posts</span></a></li><li><a href=https://michal.piekarczyk.xyz/project/ title=projects><span>projects</span></a></li><li><a href=https://michal.piekarczyk.xyz/handy/ title=handy><span>handy</span></a></li><li><a href=https://michal.piekarczyk.xyz/search/ title="search (Alt + /)" accesskey=/><span>search</span></a></li><li><a href=https://michal.piekarczyk.xyz/about/ title=about><span>about</span></a></li><li><a href=https://world.hey.com/michal.piekarczyk title=frivolity><span>frivolity</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://michal.piekarczyk.xyz/>Home</a>&nbsp;»&nbsp;<a href=https://michal.piekarczyk.xyz/handy/>Handies</a></div><h1 class=post-title></h1><div class=post-meta>9 min&nbsp;·&nbsp;1903 words&nbsp;·&nbsp;Michal Piekarczyk</div></header><div class=post-content><h4 id=histogram-overlays>histogram overlays<a hidden class=anchor aria-hidden=true href=#histogram-overlays>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># Nice technique from https://srome.github.io/Covariate-Shift,-i.e.-Why-Prediction-Quality-Can-Degrade-In-Production-and-How-To-Fix-It/ </span>
</span></span><span style=display:flex><span><span style=color:#75715e># ... put two histograms on same plot ...</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>produce_overlayed_hists_for_col_dfs</span>(col, dfs):
</span></span><span style=display:flex><span>    fig <span style=color:#f92672>=</span> plt<span style=color:#f92672>.</span>figure(figsize<span style=color:#f92672>=</span>(<span style=color:#ae81ff>12</span>,<span style=color:#ae81ff>12</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    ax <span style=color:#f92672>=</span> fig<span style=color:#f92672>.</span>add_subplot(<span style=color:#ae81ff>121</span>)
</span></span><span style=display:flex><span>    ax<span style=color:#f92672>.</span>hist(dfs[<span style=color:#ae81ff>0</span>][<span style=color:#ae81ff>1</span>][col], color<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;r&#39;</span>, alpha<span style=color:#f92672>=</span><span style=color:#ae81ff>0.2</span>, bins<span style=color:#f92672>=</span><span style=color:#ae81ff>50</span>)
</span></span><span style=display:flex><span>    ax<span style=color:#f92672>.</span>hist(dfs[<span style=color:#ae81ff>1</span>][<span style=color:#ae81ff>1</span>][col], color<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;b&#39;</span>, alpha<span style=color:#f92672>=</span><span style=color:#ae81ff>0.2</span>, bins<span style=color:#f92672>=</span><span style=color:#ae81ff>50</span>)
</span></span><span style=display:flex><span>    ax<span style=color:#f92672>.</span>set(title<span style=color:#f92672>=</span><span style=color:#e6db74>f</span><span style=color:#e6db74>&#39;</span><span style=color:#e6db74>{</span>dfs[<span style=color:#ae81ff>0</span>][<span style=color:#ae81ff>0</span>]<span style=color:#e6db74>}</span><span style=color:#e6db74> (red) vs </span><span style=color:#e6db74>{</span>dfs[<span style=color:#ae81ff>1</span>][<span style=color:#ae81ff>0</span>]<span style=color:#e6db74>}</span><span style=color:#e6db74> (blue)&#39;</span>,
</span></span><span style=display:flex><span>            ylabel<span style=color:#f92672>=</span>col)
</span></span></code></pre></div><p>Basic goal looks like the below.</p><h4 id=sparse-diagonal-x-axis-ticks>sparse diagonal x axis ticks<a hidden class=anchor aria-hidden=true href=#sparse-diagonal-x-axis-ticks>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>import</span> matplotlib.pyplot <span style=color:#66d9ef>as</span> plt
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> pandas <span style=color:#66d9ef>as</span> pd
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> datetime
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>make_xtick_labels</span>(x, step<span style=color:#f92672>=</span><span style=color:#ae81ff>5</span>):
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;&#39;&#39;Given x, step the labels every &lt;step&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    Aka, take every &lt;step&gt;th x label
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#39;&#39;&#39;</span>
</span></span><span style=display:flex><span>    x_ticks <span style=color:#f92672>=</span> [i <span style=color:#66d9ef>for</span> i <span style=color:#f92672>in</span>  range(len(x)) <span style=color:#66d9ef>if</span> i <span style=color:#f92672>%</span> step <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span>]
</span></span><span style=display:flex><span>    x_labels <span style=color:#f92672>=</span> [x[i] <span style=color:#66d9ef>for</span> i <span style=color:#f92672>in</span> x_ticks]
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> x_ticks, x_labels
</span></span></code></pre></div><ul><li>Did not add an example <code>x</code> , <code>y</code> yet, but showing an example where <code>x</code> contains dates and <code>y</code> is numeric.</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>x <span style=color:#f92672>=</span> <span style=color:#960050;background-color:#1e0010>?</span>
</span></span><span style=display:flex><span>y <span style=color:#f92672>=</span> <span style=color:#960050;background-color:#1e0010>?</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>fig <span style=color:#f92672>=</span> plt<span style=color:#f92672>.</span>figure(figsize<span style=color:#f92672>=</span>(<span style=color:#ae81ff>12</span>,<span style=color:#ae81ff>4</span>))
</span></span><span style=display:flex><span>ax <span style=color:#f92672>=</span> fig<span style=color:#f92672>.</span>add_subplot(<span style=color:#ae81ff>111</span>)
</span></span><span style=display:flex><span>ax<span style=color:#f92672>.</span>plot(y)
</span></span><span style=display:flex><span>x_ticks, x_labels <span style=color:#f92672>=</span> make_xtick_labels(x, step<span style=color:#f92672>=</span><span style=color:#ae81ff>20</span>)
</span></span><span style=display:flex><span>ax<span style=color:#f92672>.</span>set_xticks(x_ticks)
</span></span><span style=display:flex><span>ax<span style=color:#f92672>.</span>set_xticklabels(x_labels, rotation<span style=color:#f92672>=-</span><span style=color:#ae81ff>45</span>)
</span></span><span style=display:flex><span>fig<span style=color:#f92672>.</span>show()
</span></span></code></pre></div><h4 id=multiple-time-plots-and-fill-nulls-with-zeroes>Multiple time plots and fill nulls with zeroes!<a hidden class=anchor aria-hidden=true href=#multiple-time-plots-and-fill-nulls-with-zeroes>#</a></h4><ul><li>Need to fill the nulls, otherwise the behavior can be weird.</li><li>Here, have a <code>df</code> with <code>timestamp</code> and <code>label</code> , that is sparse, (meaning there are missing rows)</li><li></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>import</span> matplotlib.pyplot <span style=color:#66d9ef>as</span> plt
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> pandas <span style=color:#66d9ef>as</span> pd
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> datetime
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> random
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>random_df</span>(size<span style=color:#f92672>=</span><span style=color:#ae81ff>500</span>):
</span></span><span style=display:flex><span>    X <span style=color:#f92672>=</span> [random<span style=color:#f92672>.</span>random() <span style=color:#66d9ef>for</span> _ <span style=color:#f92672>in</span> range(size)]
</span></span><span style=display:flex><span>    vec <span style=color:#f92672>=</span> []
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> (i, x) <span style=color:#f92672>in</span> enumerate(X):
</span></span><span style=display:flex><span>    	vec<span style=color:#f92672>.</span>extend([{
</span></span><span style=display:flex><span>    		<span style=color:#e6db74>&#34;label&#34;</span>: (<span style=color:#e6db74>&#34;one&#34;</span> <span style=color:#66d9ef>if</span> x <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>0.33</span> <span style=color:#66d9ef>else</span> (<span style=color:#e6db74>&#34;two&#34;</span> <span style=color:#66d9ef>if</span> <span style=color:#ae81ff>0.33</span> <span style=color:#f92672>&lt;</span> x <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>0.66</span> <span style=color:#66d9ef>else</span> <span style=color:#e6db74>&#34;three&#34;</span>)),
</span></span><span style=display:flex><span>		<span style=color:#e6db74>&#34;timestamp&#34;</span>: datetime<span style=color:#f92672>.</span>date(<span style=color:#ae81ff>2021</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>) <span style=color:#f92672>+</span> datetime<span style=color:#f92672>.</span>timedelta(days<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span><span style=color:#f92672>*</span>i)
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> _ <span style=color:#f92672>in</span> range(random<span style=color:#f92672>.</span>randint(<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>50</span>))
</span></span><span style=display:flex><span>    ])
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> pd<span style=color:#f92672>.</span>DataFrame<span style=color:#f92672>.</span>from_records(vec)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>fill_empties</span>(statsdf):
</span></span><span style=display:flex><span>    statsdf <span style=color:#f92672>=</span> statsdf<span style=color:#f92672>.</span>copy()
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> x <span style=color:#f92672>in</span> statsdf[<span style=color:#e6db74>&#34;date&#34;</span>]<span style=color:#f92672>.</span>unique()<span style=color:#f92672>.</span>tolist():
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> label <span style=color:#f92672>in</span> statsdf<span style=color:#f92672>.</span>label<span style=color:#f92672>.</span>unique()<span style=color:#f92672>.</span>tolist():
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> statsdf[(statsdf<span style=color:#f92672>.</span>date <span style=color:#f92672>==</span> x) <span style=color:#f92672>&amp;</span> (statsdf<span style=color:#f92672>.</span>label <span style=color:#f92672>==</span> label)]<span style=color:#f92672>.</span>empty:
</span></span><span style=display:flex><span>                statsdf <span style=color:#f92672>=</span> pd<span style=color:#f92672>.</span>concat([statsdf,
</span></span><span style=display:flex><span>                    pd<span style=color:#f92672>.</span>DataFrame<span style=color:#f92672>.</span>from_records([{<span style=color:#e6db74>&#34;date&#34;</span>: x, <span style=color:#e6db74>&#34;label&#34;</span>: label, <span style=color:#e6db74>&#34;count&#34;</span>: <span style=color:#ae81ff>0</span>}])],
</span></span><span style=display:flex><span>                    ignore_index<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>
</span></span><span style=display:flex><span>                )
</span></span><span style=display:flex><span>    statsdf <span style=color:#f92672>=</span> statsdf<span style=color:#f92672>.</span>sort_values(by<span style=color:#f92672>=</span>[<span style=color:#e6db74>&#34;date&#34;</span>, <span style=color:#e6db74>&#34;label&#34;</span>])
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> statsdf
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>plot_trends</span>(df, out_loc):
</span></span><span style=display:flex><span>    statsdf <span style=color:#f92672>=</span> df<span style=color:#f92672>.</span>groupby(by<span style=color:#f92672>=</span>[<span style=color:#e6db74>&#39;date&#39;</span>, <span style=color:#e6db74>&#39;label&#39;</span>])<span style=color:#f92672>.</span>size()<span style=color:#f92672>.</span>reset_index()<span style=color:#f92672>.</span>rename(columns<span style=color:#f92672>=</span>{<span style=color:#ae81ff>0</span>: <span style=color:#e6db74>&#34;count&#34;</span>})
</span></span><span style=display:flex><span>    statsdf <span style=color:#f92672>=</span> fill_empties(statsdf)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    fig <span style=color:#f92672>=</span> plt<span style=color:#f92672>.</span>figure(figsize<span style=color:#f92672>=</span>(<span style=color:#ae81ff>12</span>,<span style=color:#ae81ff>4</span>))
</span></span><span style=display:flex><span>    ax <span style=color:#f92672>=</span> fig<span style=color:#f92672>.</span>add_subplot(<span style=color:#ae81ff>111</span>)
</span></span><span style=display:flex><span>    x <span style=color:#f92672>=</span> statsdf<span style=color:#f92672>.</span>date<span style=color:#f92672>.</span>unique()<span style=color:#f92672>.</span>tolist()
</span></span><span style=display:flex><span>    x_ticks, x_labels <span style=color:#f92672>=</span> make_xtick_labels(x, step<span style=color:#f92672>=</span><span style=color:#ae81ff>3</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> label <span style=color:#f92672>in</span> statsdf<span style=color:#f92672>.</span>label<span style=color:#f92672>.</span>unique()<span style=color:#f92672>.</span>tolist():
</span></span><span style=display:flex><span>        x <span style=color:#f92672>=</span> statsdf[statsdf<span style=color:#f92672>.</span>label <span style=color:#f92672>==</span> label][<span style=color:#e6db74>&#39;date&#39;</span>]<span style=color:#f92672>.</span>tolist()
</span></span><span style=display:flex><span>        y <span style=color:#f92672>=</span> statsdf[statsdf<span style=color:#f92672>.</span>label <span style=color:#f92672>==</span> label][<span style=color:#e6db74>&#39;count&#39;</span>]<span style=color:#f92672>.</span>tolist()
</span></span><span style=display:flex><span>        ax<span style=color:#f92672>.</span>plot(x, y, label<span style=color:#f92672>=</span>label)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    ax<span style=color:#f92672>.</span>set_xticks(x_ticks)
</span></span><span style=display:flex><span>    ax<span style=color:#f92672>.</span>set_xticklabels(x_labels, rotation<span style=color:#f92672>=-</span><span style=color:#ae81ff>45</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    ax<span style=color:#f92672>.</span>legend()
</span></span><span style=display:flex><span>    print(<span style=color:#e6db74>&#39;saving to &#39;</span>, out_loc)
</span></span><span style=display:flex><span>    pylab<span style=color:#f92672>.</span>savefig(out_loc)
</span></span><span style=display:flex><span>    pylab<span style=color:#f92672>.</span>close()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#</span>
</span></span><span style=display:flex><span>df <span style=color:#f92672>=</span> random_df(<span style=color:#ae81ff>100</span>)
</span></span><span style=display:flex><span>df[<span style=color:#e6db74>&#34;date&#34;</span>] <span style=color:#f92672>=</span> df[<span style=color:#e6db74>&#34;timestamp&#34;</span>]<span style=color:#f92672>.</span>map(<span style=color:#66d9ef>lambda</span> x:x<span style=color:#f92672>.</span>strftime(<span style=color:#e6db74>&#34;%m-</span><span style=color:#e6db74>%d</span><span style=color:#e6db74>&#34;</span>))
</span></span><span style=display:flex><span>workdir <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;some_folder&#34;</span>
</span></span><span style=display:flex><span>out_loc <span style=color:#f92672>=</span> <span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>{</span>workdir<span style=color:#e6db74>}</span><span style=color:#e6db74>/trends.png&#34;</span>
</span></span><span style=display:flex><span>plot_trends(df, out_loc)
</span></span></code></pre></div><h4 id=heatmaps-are-nice>Heatmaps are nice<a hidden class=anchor aria-hidden=true href=#heatmaps-are-nice>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>plt<span style=color:#f92672>.</span>figure(figsize<span style=color:#f92672>=</span>(<span style=color:#ae81ff>10</span>,<span style=color:#ae81ff>10</span>))
</span></span><span style=display:flex><span>plt<span style=color:#f92672>.</span>imshow(bitmap)
</span></span><span style=display:flex><span>plt<span style=color:#f92672>.</span>colorbar()
</span></span><span style=display:flex><span>plt<span style=color:#f92672>.</span>grid(<span style=color:#66d9ef>False</span>)
</span></span><span style=display:flex><span>plt<span style=color:#f92672>.</span>show()
</span></span></code></pre></div><h4 id=using-nphistogram-and-quantiles-to-spot-check-bimodal-distributions>using <code>np.histogram</code> and quantiles to spot check bimodal distributions<a hidden class=anchor aria-hidden=true href=#using-nphistogram-and-quantiles-to-spot-check-bimodal-distributions>#</a></h4><ul><li>I had this use case where I wanted to collect walltime from a service, from a dataset where a bimodal distribution was basically a given. I wanted thea mean of the second distribution.</li><li>Instead of trying to use clustering analysis like <a href=https://scikit-learn.org/stable/modules/generated/sklearn.cluster.DBSCAN.html>dbscan</a> which would have probably worked, I just started collecting the time series <code>np.histogram</code> and quantile data and I was able to visually inspect / prove that the median is a good enough statistic in this case, without too much extra data preprocessing required!</li><li>sampling data from athena every 7 days , here are two examples below.</li></ul><ul><li>supporting codes&mldr; (I didnt add code for <code>daa.run_it</code> but basically that just pulls data into a dataframe with a column <code>backend_processing_time</code> that is being used here. And <code>make_query</code> just makes a query for a particular date to pull that data. So nothing really special about those. They can be replaced with any particular method of gathering data.)</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>import</span> datetime
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> tqdm <span style=color:#f92672>import</span> tqdm
</span></span><span style=display:flex><span>d1 <span style=color:#f92672>=</span> datetime<span style=color:#f92672>.</span>date(<span style=color:#ae81ff>2019</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>d2 <span style=color:#f92672>=</span> datetime<span style=color:#f92672>.</span>date(<span style=color:#ae81ff>2020</span>, <span style=color:#ae81ff>7</span>, <span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>dd <span style=color:#f92672>=</span> ddu<span style=color:#f92672>.</span>range_dates(d1, d2, <span style=color:#ae81ff>7</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># outvec = []</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> dt <span style=color:#f92672>in</span> tqdm(dd):
</span></span><span style=display:flex><span>    query <span style=color:#f92672>=</span> make_query(dt)
</span></span><span style=display:flex><span>    athenadf <span style=color:#f92672>=</span> daa<span style=color:#f92672>.</span>run_it(query, query_name<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;Unsaved&#39;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    hist <span style=color:#f92672>=</span> np<span style=color:#f92672>.</span>histogram(athenadf<span style=color:#f92672>.</span>backend_processing_time<span style=color:#f92672>.</span>tolist(), 
</span></span><span style=display:flex><span>                    bins<span style=color:#f92672>=</span><span style=color:#ae81ff>10</span>, range<span style=color:#f92672>=</span><span style=color:#66d9ef>None</span>)
</span></span><span style=display:flex><span>    mean <span style=color:#f92672>=</span> np<span style=color:#f92672>.</span>mean(athenadf<span style=color:#f92672>.</span>backend_processing_time<span style=color:#f92672>.</span>tolist())
</span></span><span style=display:flex><span>    quantiles <span style=color:#f92672>=</span> get_quantiles(athenadf<span style=color:#f92672>.</span>backend_processing_time<span style=color:#f92672>.</span>tolist())
</span></span><span style=display:flex><span>    outvec<span style=color:#f92672>.</span>append({<span style=color:#e6db74>&#39;hist&#39;</span>: hist, <span style=color:#e6db74>&#39;quantiles&#39;</span>: quantiles,
</span></span><span style=display:flex><span>                  <span style=color:#e6db74>&#39;date&#39;</span>: dt<span style=color:#f92672>.</span>strftime(<span style=color:#e6db74>&#39;%Y-%m-</span><span style=color:#e6db74>%d</span><span style=color:#e6db74>&#39;</span>),
</span></span><span style=display:flex><span>                  <span style=color:#e6db74>&#39;mean&#39;</span>: mean})
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>import</span> numpy <span style=color:#66d9ef>as</span> np
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> matplotlib.pyplot <span style=color:#66d9ef>as</span> plt
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>get_quantiles</span>(unsorted):
</span></span><span style=display:flex><span>    data <span style=color:#f92672>=</span> sorted(unsorted)
</span></span><span style=display:flex><span>    minimum <span style=color:#f92672>=</span> data[<span style=color:#ae81ff>0</span>]
</span></span><span style=display:flex><span>    Q1 <span style=color:#f92672>=</span> np<span style=color:#f92672>.</span>percentile(data, <span style=color:#ae81ff>25</span>, interpolation <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;midpoint&#39;</span>) 
</span></span><span style=display:flex><span>    median <span style=color:#f92672>=</span> np<span style=color:#f92672>.</span>median(data)
</span></span><span style=display:flex><span>    Q3 <span style=color:#f92672>=</span> np<span style=color:#f92672>.</span>percentile(data, <span style=color:#ae81ff>75</span>, interpolation <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;midpoint&#39;</span>) 
</span></span><span style=display:flex><span>    maximum <span style=color:#f92672>=</span> data[<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>]
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> [minimum, Q1, median, Q3, maximum]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>show_da_stats</span>(bundle):
</span></span><span style=display:flex><span>    H, bins <span style=color:#f92672>=</span> bundle[<span style=color:#e6db74>&#39;hist&#39;</span>]
</span></span><span style=display:flex><span>    quantiles <span style=color:#f92672>=</span> bundle[<span style=color:#e6db74>&#39;quantiles&#39;</span>]
</span></span><span style=display:flex><span>    <span style=color:#75715e># plt.plot(x[1][:-1], x[0], drawstyle=&#39;steps&#39;)</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>#print(H, bins)</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>#print(quantiles)</span>
</span></span><span style=display:flex><span>    plt<span style=color:#f92672>.</span>scatter(quantiles, [<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>])
</span></span><span style=display:flex><span>    plt<span style=color:#f92672>.</span>axvline(quantiles[<span style=color:#ae81ff>1</span>], label<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;q:25%&#39;</span>)
</span></span><span style=display:flex><span>    plt<span style=color:#f92672>.</span>axvline(quantiles[<span style=color:#ae81ff>2</span>], label<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;q:50%&#39;</span>)
</span></span><span style=display:flex><span>    plt<span style=color:#f92672>.</span>axvline(quantiles[<span style=color:#ae81ff>3</span>], label<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;q:75%&#39;</span>)
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    plt<span style=color:#f92672>.</span>title(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;walltime histogram at </span><span style=color:#e6db74>{</span>bundle[<span style=color:#e6db74>&#39;date&#39;</span>]<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>)
</span></span><span style=display:flex><span>    plt<span style=color:#f92672>.</span>plot(bins, np<span style=color:#f92672>.</span>insert(H, <span style=color:#ae81ff>0</span>, H[<span style=color:#ae81ff>0</span>]), drawstyle<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;steps&#39;</span>, color<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;green&#39;</span>)
</span></span><span style=display:flex><span>    plt<span style=color:#f92672>.</span>grid(<span style=color:#66d9ef>True</span>)
</span></span><span style=display:flex><span>    plt<span style=color:#f92672>.</span>legend()
</span></span><span style=display:flex><span>    plt<span style=color:#f92672>.</span>show()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>bundle <span style=color:#f92672>=</span> outvec[<span style=color:#ae81ff>0</span>]
</span></span><span style=display:flex><span>show_da_stats(bundle)
</span></span></code></pre></div><h4 id=nice-how-you-can-save-figures-from-ipython-if-you-need-to>Nice how you can save figures from ipython if you need to<a hidden class=anchor aria-hidden=true href=#nice-how-you-can-save-figures-from-ipython-if-you-need-to>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>import</span> pylab
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> matplotlib.pyplot <span style=color:#66d9ef>as</span> plt
</span></span><span style=display:flex><span>plt<span style=color:#f92672>.</span>hist([<span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>2</span>,<span style=color:#ae81ff>3</span>,<span style=color:#ae81ff>4</span>,<span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>2</span>,<span style=color:#ae81ff>3</span>,<span style=color:#ae81ff>4</span>,<span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>2</span>,<span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>2</span>,<span style=color:#ae81ff>2</span>], bins<span style=color:#f92672>=</span><span style=color:#ae81ff>50</span>)
</span></span><span style=display:flex><span>plt<span style=color:#f92672>.</span>title(<span style=color:#e6db74>&#39;Histogram blah&#39;</span>)
</span></span><span style=display:flex><span>out_loc <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;/your/location.blah.png&#39;</span>
</span></span><span style=display:flex><span>print(<span style=color:#e6db74>&#39;saving to &#39;</span>, out_loc)
</span></span><span style=display:flex><span>pylab<span style=color:#f92672>.</span>savefig(out_loc)
</span></span><span style=display:flex><span>pylab<span style=color:#f92672>.</span>close()
</span></span></code></pre></div><h4 id=running-this-in-a-jupyter-notebook>Running this in a jupyter notebook<a hidden class=anchor aria-hidden=true href=#running-this-in-a-jupyter-notebook>#</a></h4><ul><li><em>(NOTE: this data is from one of the Keras Hello World datasets)</em> , per <a href=#obtaining-image-data>below</a></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>import</span> matplotlib.pyplot <span style=color:#66d9ef>as</span> plt
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>image <span style=color:#f92672>=</span> [[<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>33</span>, <span style=color:#ae81ff>96</span>, <span style=color:#ae81ff>175</span>, <span style=color:#ae81ff>156</span>, <span style=color:#ae81ff>64</span>, <span style=color:#ae81ff>14</span>, <span style=color:#ae81ff>54</span>, <span style=color:#ae81ff>137</span>, <span style=color:#ae81ff>204</span>, <span style=color:#ae81ff>194</span>, <span style=color:#ae81ff>102</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>], [<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>73</span>, <span style=color:#ae81ff>186</span>, <span style=color:#ae81ff>177</span>, <span style=color:#ae81ff>183</span>, <span style=color:#ae81ff>175</span>, <span style=color:#ae81ff>188</span>, <span style=color:#ae81ff>232</span>, <span style=color:#ae81ff>255</span>, <span style=color:#ae81ff>223</span>, <span style=color:#ae81ff>219</span>, <span style=color:#ae81ff>194</span>, <span style=color:#ae81ff>179</span>, <span style=color:#ae81ff>186</span>, <span style=color:#ae81ff>213</span>, <span style=color:#ae81ff>146</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>], [<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>35</span>, <span style=color:#ae81ff>163</span>, <span style=color:#ae81ff>140</span>, <span style=color:#ae81ff>150</span>, <span style=color:#ae81ff>152</span>, <span style=color:#ae81ff>150</span>, <span style=color:#ae81ff>146</span>, <span style=color:#ae81ff>175</span>, <span style=color:#ae81ff>175</span>, <span style=color:#ae81ff>173</span>, <span style=color:#ae81ff>171</span>, <span style=color:#ae81ff>156</span>, <span style=color:#ae81ff>152</span>, <span style=color:#ae81ff>148</span>, <span style=color:#ae81ff>129</span>, <span style=color:#ae81ff>156</span>, <span style=color:#ae81ff>140</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>], [<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>150</span>, <span style=color:#ae81ff>142</span>, <span style=color:#ae81ff>140</span>, <span style=color:#ae81ff>152</span>, <span style=color:#ae81ff>160</span>, <span style=color:#ae81ff>156</span>, <span style=color:#ae81ff>146</span>, <span style=color:#ae81ff>142</span>, <span style=color:#ae81ff>127</span>, <span style=color:#ae81ff>135</span>, <span style=color:#ae81ff>133</span>, <span style=color:#ae81ff>140</span>, <span style=color:#ae81ff>140</span>, <span style=color:#ae81ff>137</span>, <span style=color:#ae81ff>133</span>, <span style=color:#ae81ff>125</span>, <span style=color:#ae81ff>169</span>, <span style=color:#ae81ff>75</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>], [<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>54</span>, <span style=color:#ae81ff>167</span>, <span style=color:#ae81ff>146</span>, <span style=color:#ae81ff>129</span>, <span style=color:#ae81ff>142</span>, <span style=color:#ae81ff>137</span>, <span style=color:#ae81ff>137</span>, <span style=color:#ae81ff>131</span>, <span style=color:#ae81ff>148</span>, <span style=color:#ae81ff>148</span>, <span style=color:#ae81ff>133</span>, <span style=color:#ae81ff>131</span>, <span style=color:#ae81ff>131</span>, <span style=color:#ae81ff>131</span>, <span style=color:#ae81ff>125</span>, <span style=color:#ae81ff>140</span>, <span style=color:#ae81ff>140</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>], [<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>110</span>, <span style=color:#ae81ff>188</span>, <span style=color:#ae81ff>133</span>, <span style=color:#ae81ff>146</span>, <span style=color:#ae81ff>152</span>, <span style=color:#ae81ff>133</span>, <span style=color:#ae81ff>125</span>, <span style=color:#ae81ff>127</span>, <span style=color:#ae81ff>119</span>, <span style=color:#ae81ff>129</span>, <span style=color:#ae81ff>133</span>, <span style=color:#ae81ff>119</span>, <span style=color:#ae81ff>140</span>, <span style=color:#ae81ff>131</span>, <span style=color:#ae81ff>150</span>, <span style=color:#ae81ff>14</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>], [<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>221</span>, <span style=color:#ae81ff>158</span>, <span style=color:#ae81ff>137</span>, <span style=color:#ae81ff>135</span>, <span style=color:#ae81ff>123</span>, <span style=color:#ae81ff>110</span>, <span style=color:#ae81ff>110</span>, <span style=color:#ae81ff>114</span>, <span style=color:#ae81ff>108</span>, <span style=color:#ae81ff>112</span>, <span style=color:#ae81ff>117</span>, <span style=color:#ae81ff>127</span>, <span style=color:#ae81ff>142</span>, <span style=color:#ae81ff>77</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>], [<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>4</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>25</span>, <span style=color:#ae81ff>158</span>, <span style=color:#ae81ff>137</span>, <span style=color:#ae81ff>125</span>, <span style=color:#ae81ff>119</span>, <span style=color:#ae81ff>119</span>, <span style=color:#ae81ff>110</span>, <span style=color:#ae81ff>117</span>, <span style=color:#ae81ff>117</span>, <span style=color:#ae81ff>110</span>, <span style=color:#ae81ff>119</span>, <span style=color:#ae81ff>127</span>, <span style=color:#ae81ff>144</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>], [<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>123</span>, <span style=color:#ae81ff>156</span>, <span style=color:#ae81ff>129</span>, <span style=color:#ae81ff>112</span>, <span style=color:#ae81ff>110</span>, <span style=color:#ae81ff>102</span>, <span style=color:#ae81ff>112</span>, <span style=color:#ae81ff>100</span>, <span style=color:#ae81ff>121</span>, <span style=color:#ae81ff>117</span>, <span style=color:#ae81ff>129</span>, <span style=color:#ae81ff>114</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>], [<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>125</span>, <span style=color:#ae81ff>169</span>, <span style=color:#ae81ff>127</span>, <span style=color:#ae81ff>119</span>, <span style=color:#ae81ff>106</span>, <span style=color:#ae81ff>108</span>, <span style=color:#ae81ff>104</span>, <span style=color:#ae81ff>94</span>, <span style=color:#ae81ff>121</span>, <span style=color:#ae81ff>114</span>, <span style=color:#ae81ff>129</span>, <span style=color:#ae81ff>91</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>], [<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>98</span>, <span style=color:#ae81ff>171</span>, <span style=color:#ae81ff>129</span>, <span style=color:#ae81ff>112</span>, <span style=color:#ae81ff>104</span>, <span style=color:#ae81ff>114</span>, <span style=color:#ae81ff>106</span>, <span style=color:#ae81ff>102</span>, <span style=color:#ae81ff>112</span>, <span style=color:#ae81ff>104</span>, <span style=color:#ae81ff>133</span>, <span style=color:#ae81ff>64</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>4</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>], [<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>66</span>, <span style=color:#ae81ff>173</span>, <span style=color:#ae81ff>135</span>, <span style=color:#ae81ff>129</span>, <span style=color:#ae81ff>98</span>, <span style=color:#ae81ff>100</span>, <span style=color:#ae81ff>119</span>, <span style=color:#ae81ff>102</span>, <span style=color:#ae81ff>108</span>, <span style=color:#ae81ff>98</span>, <span style=color:#ae81ff>135</span>, <span style=color:#ae81ff>60</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>4</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>], [<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>56</span>, <span style=color:#ae81ff>171</span>, <span style=color:#ae81ff>135</span>, <span style=color:#ae81ff>127</span>, <span style=color:#ae81ff>100</span>, <span style=color:#ae81ff>108</span>, <span style=color:#ae81ff>117</span>, <span style=color:#ae81ff>85</span>, <span style=color:#ae81ff>106</span>, <span style=color:#ae81ff>110</span>, <span style=color:#ae81ff>135</span>, <span style=color:#ae81ff>66</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>4</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>], [<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>52</span>, <span style=color:#ae81ff>150</span>, <span style=color:#ae81ff>129</span>, <span style=color:#ae81ff>110</span>, <span style=color:#ae81ff>100</span>, <span style=color:#ae81ff>91</span>, <span style=color:#ae81ff>102</span>, <span style=color:#ae81ff>94</span>, <span style=color:#ae81ff>83</span>, <span style=color:#ae81ff>104</span>, <span style=color:#ae81ff>123</span>, <span style=color:#ae81ff>66</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>4</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>], [<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>66</span>, <span style=color:#ae81ff>167</span>, <span style=color:#ae81ff>140</span>, <span style=color:#ae81ff>148</span>, <span style=color:#ae81ff>148</span>, <span style=color:#ae81ff>127</span>, <span style=color:#ae81ff>137</span>, <span style=color:#ae81ff>152</span>, <span style=color:#ae81ff>146</span>, <span style=color:#ae81ff>146</span>, <span style=color:#ae81ff>148</span>, <span style=color:#ae81ff>96</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>], [<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>45</span>, <span style=color:#ae81ff>123</span>, <span style=color:#ae81ff>94</span>, <span style=color:#ae81ff>104</span>, <span style=color:#ae81ff>96</span>, <span style=color:#ae81ff>119</span>, <span style=color:#ae81ff>121</span>, <span style=color:#ae81ff>106</span>, <span style=color:#ae81ff>98</span>, <span style=color:#ae81ff>112</span>, <span style=color:#ae81ff>87</span>, <span style=color:#ae81ff>114</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>], [<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>106</span>, <span style=color:#ae81ff>89</span>, <span style=color:#ae81ff>58</span>, <span style=color:#ae81ff>50</span>, <span style=color:#ae81ff>37</span>, <span style=color:#ae81ff>50</span>, <span style=color:#ae81ff>66</span>, <span style=color:#ae81ff>56</span>, <span style=color:#ae81ff>50</span>, <span style=color:#ae81ff>75</span>, <span style=color:#ae81ff>75</span>, <span style=color:#ae81ff>137</span>, <span style=color:#ae81ff>22</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>], [<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>29</span>, <span style=color:#ae81ff>148</span>, <span style=color:#ae81ff>114</span>, <span style=color:#ae81ff>106</span>, <span style=color:#ae81ff>125</span>, <span style=color:#ae81ff>89</span>, <span style=color:#ae81ff>100</span>, <span style=color:#ae81ff>133</span>, <span style=color:#ae81ff>117</span>, <span style=color:#ae81ff>131</span>, <span style=color:#ae81ff>131</span>, <span style=color:#ae81ff>131</span>, <span style=color:#ae81ff>125</span>, <span style=color:#ae81ff>112</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>], [<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>100</span>, <span style=color:#ae81ff>106</span>, <span style=color:#ae81ff>114</span>, <span style=color:#ae81ff>91</span>, <span style=color:#ae81ff>137</span>, <span style=color:#ae81ff>62</span>, <span style=color:#ae81ff>102</span>, <span style=color:#ae81ff>131</span>, <span style=color:#ae81ff>89</span>, <span style=color:#ae81ff>135</span>, <span style=color:#ae81ff>112</span>, <span style=color:#ae81ff>131</span>, <span style=color:#ae81ff>108</span>, <span style=color:#ae81ff>135</span>, <span style=color:#ae81ff>37</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>], [<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>146</span>, <span style=color:#ae81ff>100</span>, <span style=color:#ae81ff>108</span>, <span style=color:#ae81ff>98</span>, <span style=color:#ae81ff>144</span>, <span style=color:#ae81ff>62</span>, <span style=color:#ae81ff>106</span>, <span style=color:#ae81ff>131</span>, <span style=color:#ae81ff>87</span>, <span style=color:#ae81ff>133</span>, <span style=color:#ae81ff>104</span>, <span style=color:#ae81ff>160</span>, <span style=color:#ae81ff>117</span>, <span style=color:#ae81ff>121</span>, <span style=color:#ae81ff>68</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>], [<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>33</span>, <span style=color:#ae81ff>121</span>, <span style=color:#ae81ff>108</span>, <span style=color:#ae81ff>96</span>, <span style=color:#ae81ff>100</span>, <span style=color:#ae81ff>140</span>, <span style=color:#ae81ff>71</span>, <span style=color:#ae81ff>106</span>, <span style=color:#ae81ff>127</span>, <span style=color:#ae81ff>85</span>, <span style=color:#ae81ff>140</span>, <span style=color:#ae81ff>104</span>, <span style=color:#ae81ff>150</span>, <span style=color:#ae81ff>140</span>, <span style=color:#ae81ff>114</span>, <span style=color:#ae81ff>89</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>], [<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>62</span>, <span style=color:#ae81ff>119</span>, <span style=color:#ae81ff>112</span>, <span style=color:#ae81ff>102</span>, <span style=color:#ae81ff>110</span>, <span style=color:#ae81ff>137</span>, <span style=color:#ae81ff>75</span>, <span style=color:#ae81ff>106</span>, <span style=color:#ae81ff>144</span>, <span style=color:#ae81ff>81</span>, <span style=color:#ae81ff>144</span>, <span style=color:#ae81ff>108</span>, <span style=color:#ae81ff>117</span>, <span style=color:#ae81ff>154</span>, <span style=color:#ae81ff>117</span>, <span style=color:#ae81ff>104</span>, <span style=color:#ae81ff>18</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>], [<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>66</span>, <span style=color:#ae81ff>121</span>, <span style=color:#ae81ff>102</span>, <span style=color:#ae81ff>112</span>, <span style=color:#ae81ff>117</span>, <span style=color:#ae81ff>131</span>, <span style=color:#ae81ff>73</span>, <span style=color:#ae81ff>104</span>, <span style=color:#ae81ff>156</span>, <span style=color:#ae81ff>77</span>, <span style=color:#ae81ff>137</span>, <span style=color:#ae81ff>135</span>, <span style=color:#ae81ff>83</span>, <span style=color:#ae81ff>179</span>, <span style=color:#ae81ff>129</span>, <span style=color:#ae81ff>121</span>, <span style=color:#ae81ff>35</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>], [<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>85</span>, <span style=color:#ae81ff>127</span>, <span style=color:#ae81ff>81</span>, <span style=color:#ae81ff>125</span>, <span style=color:#ae81ff>133</span>, <span style=color:#ae81ff>119</span>, <span style=color:#ae81ff>79</span>, <span style=color:#ae81ff>100</span>, <span style=color:#ae81ff>169</span>, <span style=color:#ae81ff>83</span>, <span style=color:#ae81ff>129</span>, <span style=color:#ae81ff>175</span>, <span style=color:#ae81ff>60</span>, <span style=color:#ae81ff>163</span>, <span style=color:#ae81ff>135</span>, <span style=color:#ae81ff>146</span>, <span style=color:#ae81ff>39</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>], [<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>106</span>, <span style=color:#ae81ff>129</span>, <span style=color:#ae81ff>62</span>, <span style=color:#ae81ff>140</span>, <span style=color:#ae81ff>144</span>, <span style=color:#ae81ff>108</span>, <span style=color:#ae81ff>85</span>, <span style=color:#ae81ff>83</span>, <span style=color:#ae81ff>158</span>, <span style=color:#ae81ff>85</span>, <span style=color:#ae81ff>129</span>, <span style=color:#ae81ff>175</span>, <span style=color:#ae81ff>48</span>, <span style=color:#ae81ff>146</span>, <span style=color:#ae81ff>133</span>, <span style=color:#ae81ff>135</span>, <span style=color:#ae81ff>64</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>], [<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>117</span>, <span style=color:#ae81ff>119</span>, <span style=color:#ae81ff>79</span>, <span style=color:#ae81ff>140</span>, <span style=color:#ae81ff>152</span>, <span style=color:#ae81ff>102</span>, <span style=color:#ae81ff>89</span>, <span style=color:#ae81ff>110</span>, <span style=color:#ae81ff>137</span>, <span style=color:#ae81ff>96</span>, <span style=color:#ae81ff>150</span>, <span style=color:#ae81ff>196</span>, <span style=color:#ae81ff>83</span>, <span style=color:#ae81ff>144</span>, <span style=color:#ae81ff>135</span>, <span style=color:#ae81ff>133</span>, <span style=color:#ae81ff>77</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>], [<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>154</span>, <span style=color:#ae81ff>121</span>, <span style=color:#ae81ff>87</span>, <span style=color:#ae81ff>140</span>, <span style=color:#ae81ff>154</span>, <span style=color:#ae81ff>112</span>, <span style=color:#ae81ff>94</span>, <span style=color:#ae81ff>52</span>, <span style=color:#ae81ff>142</span>, <span style=color:#ae81ff>100</span>, <span style=color:#ae81ff>83</span>, <span style=color:#ae81ff>152</span>, <span style=color:#ae81ff>85</span>, <span style=color:#ae81ff>160</span>, <span style=color:#ae81ff>133</span>, <span style=color:#ae81ff>100</span>, <span style=color:#ae81ff>12</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>], [<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>4</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>35</span>, <span style=color:#ae81ff>4</span>, <span style=color:#ae81ff>33</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>]]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>plt<span style=color:#f92672>.</span>figure()
</span></span><span style=display:flex><span>plt<span style=color:#f92672>.</span>imshow(train_images[<span style=color:#ae81ff>3</span>])
</span></span><span style=display:flex><span>plt<span style=color:#f92672>.</span>colorbar()
</span></span><span style=display:flex><span>plt<span style=color:#f92672>.</span>grid(<span style=color:#66d9ef>False</span>)
</span></span><span style=display:flex><span>plt<span style=color:#f92672>.</span>show()
</span></span></code></pre></div><ul><li>And wow that displays&mldr;</li></ul><h4 id=and-the-matplot-grid--wow-this-is-cool-too>And the matplot grid , wow this is cool too<a hidden class=anchor aria-hidden=true href=#and-the-matplot-grid--wow-this-is-cool-too>#</a></h4><ul><li>Example code from <a href=https://www.tensorflow.org/tutorials/keras/basic_classification>this tutorial</a></li><li>According to <code>help(plt.subplot)</code> , <code>plt.subplot(5, 5, i)</code> below is an instruction to place the <code>i</code>th thing, within a <code>5x5</code> grid,
so basically the count starts at <code>0</code> from the upper left corner and spreads the grid as if it were a tape, from <code>0</code> to <code>5*5 - 1</code></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>plt<span style=color:#f92672>.</span>figure(figsize<span style=color:#f92672>=</span>(<span style=color:#ae81ff>10</span>,<span style=color:#ae81ff>10</span>))
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> i <span style=color:#f92672>in</span> range(<span style=color:#ae81ff>25</span>):
</span></span><span style=display:flex><span>    plt<span style=color:#f92672>.</span>subplot(<span style=color:#ae81ff>5</span>,<span style=color:#ae81ff>5</span>,i<span style=color:#f92672>+</span><span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>    plt<span style=color:#f92672>.</span>xticks([])
</span></span><span style=display:flex><span>    plt<span style=color:#f92672>.</span>yticks([])
</span></span><span style=display:flex><span>    plt<span style=color:#f92672>.</span>grid(<span style=color:#66d9ef>False</span>)
</span></span><span style=display:flex><span>    plt<span style=color:#f92672>.</span>imshow(train_images[i]) <span style=color:#75715e># , cmap=plt.cm.binary</span>
</span></span><span style=display:flex><span>    plt<span style=color:#f92672>.</span>xlabel(class_names[train_labels[i]])
</span></span><span style=display:flex><span>plt<span style=color:#f92672>.</span>show()
</span></span></code></pre></div><h4 id=obtaining-image-data>Obtaining image data<a hidden class=anchor aria-hidden=true href=#obtaining-image-data>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> tensorflow <span style=color:#f92672>import</span> keras
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>fashion_mnist <span style=color:#f92672>=</span> keras<span style=color:#f92672>.</span>datasets<span style=color:#f92672>.</span>fashion_mnist
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(train_images, train_labels), (test_images, test_labels) <span style=color:#f92672>=</span> fashion_mnist<span style=color:#f92672>.</span>load_data()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>image <span style=color:#f92672>=</span> train_mages[<span style=color:#ae81ff>3</span>]
</span></span></code></pre></div><h4 id=plot-colors>Plot colors<a hidden class=anchor aria-hidden=true href=#plot-colors>#</a></h4><ul><li>With tips from <a href=https://stackoverflow.com/questions/14088687/how-to-change-plot-background-color>here</a></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># print(plt.style.available)</span>
</span></span><span style=display:flex><span><span style=color:#75715e># [&#39;Solarize_Light2&#39;, &#39;_classic_test_patch&#39;, &#39;bmh&#39;, &#39;classic&#39;, &#39;dark_background&#39;, &#39;fast&#39;, &#39;fivethirtyeight&#39;, &#39;ggplot&#39;, &#39;grayscale&#39;, &#39;seaborn&#39;, &#39;seaborn-bright&#39;, &#39;seaborn-colorblind&#39;, &#39;seaborn-dark&#39;, &#39;seaborn-dark-palette&#39;, &#39;seaborn-darkgrid&#39;, &#39;seaborn-deep&#39;, &#39;seaborn-muted&#39;, &#39;seaborn-notebook&#39;, &#39;seaborn-paper&#39;, &#39;seaborn-pastel&#39;, &#39;seaborn-poster&#39;, &#39;seaborn-talk&#39;, &#39;seaborn-ticks&#39;, &#39;seaborn-white&#39;, &#39;seaborn-whitegrid&#39;, &#39;tableau-colorblind10&#39;]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>fig <span style=color:#f92672>=</span> plt<span style=color:#f92672>.</span>figure(figsize<span style=color:#f92672>=</span>(<span style=color:#ae81ff>6</span>, <span style=color:#ae81ff>6</span>))
</span></span><span style=display:flex><span>fig<span style=color:#f92672>.</span>patch<span style=color:#f92672>.</span>set_facecolor(<span style=color:#e6db74>&#39;xkcd:mint green&#39;</span>)
</span></span><span style=display:flex><span>ax <span style=color:#f92672>=</span> fig<span style=color:#f92672>.</span>add_subplot(<span style=color:#ae81ff>111</span>, )
</span></span><span style=display:flex><span>ax<span style=color:#f92672>.</span>hist([<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>3</span>, <span style=color:#ae81ff>4</span>, <span style=color:#ae81ff>5</span>, <span style=color:#ae81ff>6</span>], bins<span style=color:#f92672>=</span><span style=color:#ae81ff>2</span>, )
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>ax<span style=color:#f92672>.</span>set_facecolor(<span style=color:#e6db74>&#39;xkcd:salmon&#39;</span>)
</span></span><span style=display:flex><span>    <span style=color:#75715e>#plt.show(transparent=False)</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>#help(ax) # set_subplotspec</span>
</span></span></code></pre></div><ul><li>For the background this also helped.. ( per <a href=https://matplotlib.org/tutorials/introductory/customizing.html>here</a> )</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># print(plt.style.available)</span>
</span></span><span style=display:flex><span><span style=color:#75715e># [&#39;Solarize_Light2&#39;, &#39;_classic_test_patch&#39;, &#39;bmh&#39;, &#39;classic&#39;, &#39;dark_background&#39;, &#39;fast&#39;, &#39;fivethirtyeight&#39;, &#39;ggplot&#39;, &#39;grayscale&#39;, &#39;seaborn&#39;, &#39;seaborn-bright&#39;, &#39;seaborn-colorblind&#39;, &#39;seaborn-dark&#39;, &#39;seaborn-dark-palette&#39;, &#39;seaborn-darkgrid&#39;, &#39;seaborn-deep&#39;, &#39;seaborn-muted&#39;, &#39;seaborn-notebook&#39;, &#39;seaborn-paper&#39;, &#39;seaborn-pastel&#39;, &#39;seaborn-poster&#39;, &#39;seaborn-talk&#39;, &#39;seaborn-ticks&#39;, &#39;seaborn-white&#39;, &#39;seaborn-whitegrid&#39;, &#39;tableau-colorblind10&#39;]</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>with</span> plt<span style=color:#f92672>.</span>style<span style=color:#f92672>.</span>context(<span style=color:#e6db74>&#39;fivethirtyeight&#39;</span>):
</span></span><span style=display:flex><span>    fig <span style=color:#f92672>=</span> plt<span style=color:#f92672>.</span>figure(figsize<span style=color:#f92672>=</span>(<span style=color:#ae81ff>6</span>, <span style=color:#ae81ff>6</span>))
</span></span><span style=display:flex><span>    ax <span style=color:#f92672>=</span> fig<span style=color:#f92672>.</span>add_subplot(<span style=color:#ae81ff>111</span>, )
</span></span><span style=display:flex><span>    ax<span style=color:#f92672>.</span>hist([<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>3</span>, <span style=color:#ae81ff>4</span>, <span style=color:#ae81ff>5</span>, <span style=color:#ae81ff>6</span>], bins<span style=color:#f92672>=</span><span style=color:#ae81ff>2</span>, )
</span></span></code></pre></div><ul><li>more <a href="https://matplotlib.org/api/colors_api.html?highlight=color#module-matplotlib.colors">colors</a></li></ul><h4 id=how-to-display-a-png-from-a-file>How to display a png from a file<a hidden class=anchor aria-hidden=true href=#how-to-display-a-png-from-a-file>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> IPython.display <span style=color:#f92672>import</span> Image, display
</span></span><span style=display:flex><span>loc <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;somefile.png&#39;</span>
</span></span><span style=display:flex><span>display(Image(filename<span style=color:#f92672>=</span>loc))
</span></span></code></pre></div><h4 id=prevent-some-parts-of-figure-from-getting-cut-off>Prevent some parts of figure from getting cut off<a hidden class=anchor aria-hidden=true href=#prevent-some-parts-of-figure-from-getting-cut-off>#</a></h4><ul><li>This <code>bbox_inches='tight'</code> option really helps</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>with</span> plt<span style=color:#f92672>.</span>style<span style=color:#f92672>.</span>context(<span style=color:#e6db74>&#39;fivethirtyeight&#39;</span>):
</span></span><span style=display:flex><span>    plt<span style=color:#f92672>.</span>plot(np<span style=color:#f92672>.</span>random<span style=color:#f92672>.</span>randint(<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>100</span>, size<span style=color:#f92672>=</span><span style=color:#ae81ff>100</span>), np<span style=color:#f92672>.</span>random<span style=color:#f92672>.</span>randint(<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>100</span>, size<span style=color:#f92672>=</span><span style=color:#ae81ff>100</span>))
</span></span><span style=display:flex><span>    plt<span style=color:#f92672>.</span>title(<span style=color:#e6db74>&#39;blah title&#39;</span>)
</span></span><span style=display:flex><span>    out_loc <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;blah.png&#39;</span>
</span></span><span style=display:flex><span>    print(<span style=color:#e6db74>&#39;saving to &#39;</span>, out_loc)
</span></span><span style=display:flex><span>    pylab<span style=color:#f92672>.</span>savefig(out_loc, bbox_inches<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;tight&#39;</span>)
</span></span><span style=display:flex><span>    pylab<span style=color:#f92672>.</span>close()
</span></span></code></pre></div><h4 id=broken-bar-chart-intended-for-gantt-and-i-suspect-useful-as-a-waterfall-for-walltimes>broken bar chart intended for gantt and I suspect useful as a waterfall for walltimes<a hidden class=anchor aria-hidden=true href=#broken-bar-chart-intended-for-gantt-and-i-suspect-useful-as-a-waterfall-for-walltimes>#</a></h4><ul><li>Borrowing this beautiful example from <a href=https://www.geeksforgeeks.org/python-basic-gantt-chart-using-matplotlib/>Geeks for Geeks</a></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># Declaring a figure &#34;gnt&#34;</span>
</span></span><span style=display:flex><span>fig, gnt <span style=color:#f92672>=</span> plt<span style=color:#f92672>.</span>subplots()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Setting Y-axis limits</span>
</span></span><span style=display:flex><span>gnt<span style=color:#f92672>.</span>set_ylim(<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>50</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Setting X-axis limits</span>
</span></span><span style=display:flex><span>gnt<span style=color:#f92672>.</span>set_xlim(<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>160</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Setting labels for x-axis and y-axis</span>
</span></span><span style=display:flex><span>gnt<span style=color:#f92672>.</span>set_xlabel(<span style=color:#e6db74>&#39;seconds since start&#39;</span>)
</span></span><span style=display:flex><span>gnt<span style=color:#f92672>.</span>set_ylabel(<span style=color:#e6db74>&#39;Processor&#39;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Setting ticks on y-axis</span>
</span></span><span style=display:flex><span>gnt<span style=color:#f92672>.</span>set_yticks([<span style=color:#ae81ff>15</span>, <span style=color:#ae81ff>25</span>, <span style=color:#ae81ff>35</span>])
</span></span><span style=display:flex><span><span style=color:#75715e># Labelling tickes of y-axis</span>
</span></span><span style=display:flex><span>gnt<span style=color:#f92672>.</span>set_yticklabels([<span style=color:#e6db74>&#39;1&#39;</span>, <span style=color:#e6db74>&#39;2&#39;</span>, <span style=color:#e6db74>&#39;3&#39;</span>])
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Setting graph attribute</span>
</span></span><span style=display:flex><span>gnt<span style=color:#f92672>.</span>grid(<span style=color:#66d9ef>True</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Declaring a bar in schedule</span>
</span></span><span style=display:flex><span>gnt<span style=color:#f92672>.</span>broken_barh([(<span style=color:#ae81ff>40</span>, <span style=color:#ae81ff>50</span>)], (<span style=color:#ae81ff>30</span>, <span style=color:#ae81ff>9</span>), facecolors <span style=color:#f92672>=</span>(<span style=color:#e6db74>&#39;tab:orange&#39;</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Declaring multiple bars in at same level and same width</span>
</span></span><span style=display:flex><span>gnt<span style=color:#f92672>.</span>broken_barh([(<span style=color:#ae81ff>110</span>, <span style=color:#ae81ff>10</span>), (<span style=color:#ae81ff>150</span>, <span style=color:#ae81ff>10</span>)], (<span style=color:#ae81ff>10</span>, <span style=color:#ae81ff>9</span>),
</span></span><span style=display:flex><span>						facecolors <span style=color:#f92672>=</span><span style=color:#e6db74>&#39;tab:blue&#39;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>gnt<span style=color:#f92672>.</span>broken_barh([(<span style=color:#ae81ff>10</span>, <span style=color:#ae81ff>50</span>), (<span style=color:#ae81ff>100</span>, <span style=color:#ae81ff>20</span>), (<span style=color:#ae81ff>130</span>, <span style=color:#ae81ff>10</span>)], (<span style=color:#ae81ff>20</span>, <span style=color:#ae81ff>9</span>),
</span></span><span style=display:flex><span>								facecolors <span style=color:#f92672>=</span>(<span style=color:#e6db74>&#39;tab:red&#39;</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>loc <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;gantt.png&#39;</span>
</span></span><span style=display:flex><span>plt<span style=color:#f92672>.</span>savefig(loc)
</span></span></code></pre></div></div><footer class=post-footer><ul class=post-tags></ul></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://michal.piekarczyk.xyz/>michal.piekarczyk.xyz</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>