<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>michal.piekarczyk.xyz</title><meta name=keywords content><meta name=description content="Build issues again haha I am doing jekyll build but this time from a Makefile , containing
build: jekyll build with make build And I&rsquo;m getting $ make build jekyll build Traceback (most recent call last): 10: from /usr/local/lib/ruby/gems/2.6.0/bin/jekyll:23:in `<main>' 9: from /usr/local/lib/ruby/gems/2.6.0/bin/jekyll:23:in `load' 8: from /usr/local/lib/ruby/gems/2.6.0/gems/jekyll-4.0.0/exe/jekyll:11:in `<top (required)>' 7: from /usr/local/lib/ruby/gems/2.6.0/gems/jekyll-4.0.0/lib/jekyll/plugin_manager.rb:52:in `require_from_bundler' 6: from /usr/local/lib/ruby/gems/2.6.0/gems/bundler-2.0.2/lib/bundler.rb:107:in `setup' 5: from /usr/local/lib/ruby/gems/2.6.0/gems/bundler-2.0.2/lib/bundler/runtime.rb:26:in `setup' 4: from /usr/local/lib/ruby/gems/2.6.0/gems/bundler-2.0.2/lib/bundler/runtime.rb:26:in `map' 3: from /usr/local/lib/ruby/gems/2.6.0/gems/bundler-2.0.2/lib/bundler/spec_set.rb:148:in `each' 2: from /usr/local/lib/ruby/gems/2."><meta name=author content="Michal Piekarczyk"><link rel=canonical href=https://michal.piekarczyk.xyz/post/2020-10-20--build-issues-again/><link crossorigin=anonymous href=/assets/css/stylesheet.4c73b1b942ee612f2f6a56636bd60cf62223b2cdb42d501875d67bb952acf3c0.css integrity="sha256-THOxuULuYS8valZja9YM9iIjss20LVAYddZ7uVKs88A=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://michal.piekarczyk.xyz/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://michal.piekarczyk.xyz/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://michal.piekarczyk.xyz/favicon-32x32.png><link rel=apple-touch-icon href=https://michal.piekarczyk.xyz/apple-touch-icon.png><link rel=mask-icon href=https://michal.piekarczyk.xyz/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-74MK08REDT"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-74MK08REDT",{anonymize_ip:!1})}</script><meta property="og:title" content><meta property="og:description" content="Build issues again haha I am doing jekyll build but this time from a Makefile , containing
build: jekyll build with make build And I&rsquo;m getting $ make build jekyll build Traceback (most recent call last): 10: from /usr/local/lib/ruby/gems/2.6.0/bin/jekyll:23:in `<main>' 9: from /usr/local/lib/ruby/gems/2.6.0/bin/jekyll:23:in `load' 8: from /usr/local/lib/ruby/gems/2.6.0/gems/jekyll-4.0.0/exe/jekyll:11:in `<top (required)>' 7: from /usr/local/lib/ruby/gems/2.6.0/gems/jekyll-4.0.0/lib/jekyll/plugin_manager.rb:52:in `require_from_bundler' 6: from /usr/local/lib/ruby/gems/2.6.0/gems/bundler-2.0.2/lib/bundler.rb:107:in `setup' 5: from /usr/local/lib/ruby/gems/2.6.0/gems/bundler-2.0.2/lib/bundler/runtime.rb:26:in `setup' 4: from /usr/local/lib/ruby/gems/2.6.0/gems/bundler-2.0.2/lib/bundler/runtime.rb:26:in `map' 3: from /usr/local/lib/ruby/gems/2.6.0/gems/bundler-2.0.2/lib/bundler/spec_set.rb:148:in `each' 2: from /usr/local/lib/ruby/gems/2."><meta property="og:type" content="article"><meta property="og:url" content="https://michal.piekarczyk.xyz/post/2020-10-20--build-issues-again/"><meta property="article:section" content="post"><meta property="og:site_name" content="michal.piekarczyk.xyz"><meta name=twitter:card content="summary"><meta name=twitter:title content><meta name=twitter:description content="Build issues again haha I am doing jekyll build but this time from a Makefile , containing
build: jekyll build with make build And I&rsquo;m getting $ make build jekyll build Traceback (most recent call last): 10: from /usr/local/lib/ruby/gems/2.6.0/bin/jekyll:23:in `<main>' 9: from /usr/local/lib/ruby/gems/2.6.0/bin/jekyll:23:in `load' 8: from /usr/local/lib/ruby/gems/2.6.0/gems/jekyll-4.0.0/exe/jekyll:11:in `<top (required)>' 7: from /usr/local/lib/ruby/gems/2.6.0/gems/jekyll-4.0.0/lib/jekyll/plugin_manager.rb:52:in `require_from_bundler' 6: from /usr/local/lib/ruby/gems/2.6.0/gems/bundler-2.0.2/lib/bundler.rb:107:in `setup' 5: from /usr/local/lib/ruby/gems/2.6.0/gems/bundler-2.0.2/lib/bundler/runtime.rb:26:in `setup' 4: from /usr/local/lib/ruby/gems/2.6.0/gems/bundler-2.0.2/lib/bundler/runtime.rb:26:in `map' 3: from /usr/local/lib/ruby/gems/2.6.0/gems/bundler-2.0.2/lib/bundler/spec_set.rb:148:in `each' 2: from /usr/local/lib/ruby/gems/2."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://michal.piekarczyk.xyz/post/"},{"@type":"ListItem","position":2,"name":"","item":"https://michal.piekarczyk.xyz/post/2020-10-20--build-issues-again/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"","name":"","description":"Build issues again haha I am doing jekyll build but this time from a Makefile , containing\nbuild: jekyll build with make build And I\u0026rsquo;m getting $ make build jekyll build Traceback (most recent call last): 10: from /usr/local/lib/ruby/gems/2.6.0/bin/jekyll:23:in `\u0026lt;main\u0026gt;\u0026#39; 9: from /usr/local/lib/ruby/gems/2.6.0/bin/jekyll:23:in `load\u0026#39; 8: from /usr/local/lib/ruby/gems/2.6.0/gems/jekyll-4.0.0/exe/jekyll:11:in `\u0026lt;top (required)\u0026gt;\u0026#39; 7: from /usr/local/lib/ruby/gems/2.6.0/gems/jekyll-4.0.0/lib/jekyll/plugin_manager.rb:52:in `require_from_bundler\u0026#39; 6: from /usr/local/lib/ruby/gems/2.6.0/gems/bundler-2.0.2/lib/bundler.rb:107:in `setup\u0026#39; 5: from /usr/local/lib/ruby/gems/2.6.0/gems/bundler-2.0.2/lib/bundler/runtime.rb:26:in `setup\u0026#39; 4: from /usr/local/lib/ruby/gems/2.6.0/gems/bundler-2.0.2/lib/bundler/runtime.rb:26:in `map\u0026#39; 3: from /usr/local/lib/ruby/gems/2.6.0/gems/bundler-2.0.2/lib/bundler/spec_set.rb:148:in `each\u0026#39; 2: from /usr/local/lib/ruby/gems/2.","keywords":[],"articleBody":"Build issues again haha I am doing jekyll build but this time from a Makefile , containing\nbuild: jekyll build with make build And I’m getting $ make build jekyll build Traceback (most recent call last): 10: from /usr/local/lib/ruby/gems/2.6.0/bin/jekyll:23:in `' 9: from /usr/local/lib/ruby/gems/2.6.0/bin/jekyll:23:in `load' 8: from /usr/local/lib/ruby/gems/2.6.0/gems/jekyll-4.0.0/exe/jekyll:11:in `' 7: from /usr/local/lib/ruby/gems/2.6.0/gems/jekyll-4.0.0/lib/jekyll/plugin_manager.rb:52:in `require_from_bundler' 6: from /usr/local/lib/ruby/gems/2.6.0/gems/bundler-2.0.2/lib/bundler.rb:107:in `setup' 5: from /usr/local/lib/ruby/gems/2.6.0/gems/bundler-2.0.2/lib/bundler/runtime.rb:26:in `setup' 4: from /usr/local/lib/ruby/gems/2.6.0/gems/bundler-2.0.2/lib/bundler/runtime.rb:26:in `map' 3: from /usr/local/lib/ruby/gems/2.6.0/gems/bundler-2.0.2/lib/bundler/spec_set.rb:148:in `each' 2: from /usr/local/lib/ruby/gems/2.6.0/gems/bundler-2.0.2/lib/bundler/spec_set.rb:148:in `each' 1: from /usr/local/lib/ruby/gems/2.6.0/gems/bundler-2.0.2/lib/bundler/runtime.rb:31:in `block in setup' /usr/local/lib/ruby/gems/2.6.0/gems/bundler-2.0.2/lib/bundler/runtime.rb:319:in `check_for_activated_spec!': You have already activated public_suffix 4.0.5, but your Gemfile requires public_suffix 4.0.1. Prepending `bundle exec` to your command may solve this. (Gem::LoadError) make: *** [build] Error 1 Ok cool. Whatever that means haha. So going full Memento here, looking at my earlier notes , I see last time I used gem update --system to solve the problem. So doing that again this time , and saw this output.. $ gem update --system Updating rubygems-update Fetching rubygems-update-3.1.4.gem Successfully installed rubygems-update-3.1.4 Parsing documentation for rubygems-update-3.1.4 Installing ri documentation for rubygems-update-3.1.4 Installing darkfish documentation for rubygems-update-3.1.4 Done installing documentation for rubygems-update after 59 seconds Parsing documentation for rubygems-update-3.1.4 Done installing documentation for rubygems-update after 0 seconds Installing RubyGems 3.1.4 Successfully built RubyGem Name: bundler Version: 2.1.4 File: bundler-2.1.4.gem Bundler 2.1.4 installed RubyGems 3.1.4 installed Regenerating binstubs Parsing documentation for rubygems-3.1.4 Installing ri documentation for rubygems-3.1.4 === 3.1.4 / 2020-06-03 Minor enhancements: * Deprecate rubyforge_project attribute only during build time. Pull request #3609 by Josef Šimánek. * Update links. Pull request #3610 by Josef Šimánek. * Run CI at 3.1 branch head as well. Pull request #3677 by Josef Šimánek. * Remove failing ubuntu-rvm CI flow. Pull request #3611 by Josef Šimánek. ------------------------------------------------------------------------------ RubyGems installed the following executables: /usr/local/Cellar/ruby/2.6.5/bin/gem /usr/local/Cellar/ruby/2.6.5/bin/bundle Ruby Interactive (ri) documentation was installed. ri is kind of like man pages for Ruby libraries. You may access it like this: ri Classname ri Classname.class_method ri Classname#instance_method If you do not wish to install this documentation in the future, use the --no-document flag, or set it as the default in your ~/.gemrc file. See 'gem help env' for details. RubyGems system software updated You have new mail in /var/mail/michal $ ok letss try again make build Darn getting same result. Ok it says to use bundle exec jekyll build instead. Going to try that\nOk now it did stuff…\n$ make build bundle exec jekyll build Configuration file: /xxxx/repo/namoopsoo.github.io/_config.yml Source: /xxxx/repo/namoopsoo.github.io Destination: /xxxx/namoopsoo.github.io/_site Incremental build: disabled. Enable with --incremental Generating... Error: could not read file /xxxx/namoopsoo.github.io/_posts/2019-05-13--keras-hello-world-fashion_files/2019-05-13--keras-hello-world-fashion_18_0.png: invalid byte sequence in UTF-8 ... ... Jekyll Feed: Generating feed for posts done in 1.715 seconds. Auto-regeneration: disabled. Use --watch to enable. $ Now it doesnt like some pngs. Maybe it worked though. Will try. Also I forgot that as long as I don’t want to care what this looks like locally, I can just push commits to github and then everything just builds there and nothing needs to be done locally. Anyway but for local preview, I wonder if I can just find a jekyll docker to make this easier so as not to worry about these weird ruby configurations. Oh wow docker Turns out per reading here , there is indeed a jekyll Docker image already. Let me just test run that wow. docker pull jekyll/jekyll ... Digest: sha256:bb45414c3fefa80a75c5001f30baf1dff48ae31dc961b8b51003b93b60675334 Status: Downloaded newer image for jekyll/jekyll:latest But then when running from the github , export JEKYLL_VERSION=3.8 docker run --rm \\ --volume=\"$PWD:/srv/jekyll\" \\ -it jekyll/jekyll:$JEKYLL_VERSION # jekyll build \u003c= left out this part so I can look inside... But I got this Unable to find image 'jekyll/jekyll:3.8' locally 3.8: Pulling from jekyll/jekyll ... Digest: sha256:9521c8aae4739fcbc7137ead19f91841b833d671542f13e91ca40280e88d6e34 Status: Downloaded newer image for jekyll/jekyll:3.8 So I suppose latesst was not 3.8. Anyway wow, a few minutes later this run command is still well, running Fetching gem metadata from https://rubygems.org/......... Fetching public_suffix 4.0.1 Installing public_suffix 4.0.1 Fetching addressable 2.7.0 Installing addressable 2.7.0 Using bundler 2.0.2 Fetching colorator 1.1.0 Installing colorator 1.1.0 Fetching concurrent-ruby 1.1.5 Installing concurrent-ruby 1.1.5 Fetching eventmachine 1.2.7 Installing eventmachine 1.2.7 with native extensions Fetching http_parser.rb 0.6.0 Installing http_parser.rb 0.6.0 with native extensions Fetching em-websocket 0.5.1 Installing em-websocket 0.5.1 Fetching ffi 1.11.1 Installing ffi 1.11.1 with native extensions Fetching forwardable-extended 2.6.0 Installing forwardable-extended 2.6.0 Fetching i18n 1.7.0 Installing i18n 1.7.0 Fetching sassc 2.2.1 Installing sassc 2.2.1 with native extensions ok continued.. that last part took a while, but the later stuff was quick. Fetching jekyll-sass-converter 2.0.1 Installing jekyll-sass-converter 2.0.1 Fetching rb-fsevent 0.10.3 Installing rb-fsevent 0.10.3 Fetching rb-inotify 0.10.0 Installing rb-inotify 0.10.0 Fetching listen 3.2.0 Installing listen 3.2.0 Fetching jekyll-watch 2.2.1 Installing jekyll-watch 2.2.1 Fetching kramdown 2.1.0 Installing kramdown 2.1.0 Fetching kramdown-parser-gfm 1.1.0 Installing kramdown-parser-gfm 1.1.0 Fetching liquid 4.0.3 Installing liquid 4.0.3 Fetching mercenary 0.3.6 Installing mercenary 0.3.6 Fetching pathutil 0.16.2 Installing pathutil 0.16.2 Fetching rouge 3.12.0 Installing rouge 3.12.0 Fetching safe_yaml 1.0.5 Installing safe_yaml 1.0.5 Fetching unicode-display_width 1.6.0 Installing unicode-display_width 1.6.0 Fetching terminal-table 1.8.0 Installing terminal-table 1.8.0 Fetching jekyll 4.0.0 Installing jekyll 4.0.0 Fetching jekyll-feed 0.12.1 Installing jekyll-feed 0.12.1 Fetching jekyll-seo-tag 2.6.1 Installing jekyll-seo-tag 2.6.1 Fetching jekyll-sitemap 1.3.1 Installing jekyll-sitemap 1.3.1 Fetching minima 2.5.1 Installing minima 2.5.1 Bundle complete! 8 Gemfile dependencies, 31 gems now installed. Bundled gems are installed into `/usr/local/bundle` ruby 2.6.3p62 (2019-04-16 revision 67580) [x86_64-linux-musl] jekyll 4.0.0 -- Jekyll is a blog-aware, static site generator in Ruby Usage: jekyll [options] Options: -s, --source [DIR] Source directory (defaults to ./) -d, --destination [DIR] Destination directory (defaults to ./_site) --safe Safe mode (defaults to false) -p, --plugins PLUGINS_DIR1[,PLUGINS_DIR2[,...]] Plugins directory (defaults to ./_plugins) --layouts DIR Layouts directory (defaults to ./_layouts) --profile Generate a Liquid rendering profile -h, --help Show this message -v, --version Print the name and version -t, --trace Show the full backtrace when an error occurs Subcommands: compose docs import build, b Build your site clean Clean the site (removes site output and metadata file) without building. doctor, hyde Search site and print specific deprecation warnings help Show the help message, optionally for a given subcommand. new Creates a new Jekyll site scaffold in PATH new-theme Creates a new Jekyll theme scaffold serve, server, s Serve your site locally Oops, guess I ran this poorly… wait hmm I have the interactive flags, not sure why it quit. weird. Going to try again … and w/o the --rm so I dont have to redo it… export JEKYLL_VERSION=3.8 docker run \\ --volume=\"$PWD:/srv/jekyll\" \\ -i -t jekyll/jekyll:$JEKYLL_VERSION Start 16:18 UTC .. 16:23 UTC … but still not playing nice. not sure why quitting. But the container should at least be running now hopefully.. So let me at least try build. Hmm but docker ps shows nothing weird. COnfused why it’s exiting… $ docker ps --last 5 CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES 9ac4abb74269 jekyll/jekyll:3.8 \"/usr/jekyll/bin/ent…\" 7 minutes ago Exited (0) 2 minutes ago compassionate_mccarthy Anyway trying with jekyll build did work but of course it exited again, so this is not really useful if it takes 5 minutes for stuff to happen and I can’t keep the container around.\nI do see in the Dockerfile here that 4000 is permanently exposed so I dont even have to specify that with the docker run command so that’s cool.\nHmm in the README it is written to use gem \"jekyll\", \"~\u003e 3.8\" in your Gemfile. My Gemfile has \"jekyll\", \"~\u003e 4.0.0\" actually. I wonder if …\nAha and in the output it does actually show\nFetching jekyll 4.0.0 Installing jekyll 4.0.0 So it is almost like this mismatch may have caused this to be taking extra time.\nSo probably the Gemfile should be consistent with this docker image and then it will not take 5 bonus minutes ?\nMaybe this phenomenon is described here “my gems arent caching”…. Ok so I’m diverging indeed ok.\nOk trying again w/ gem \"jekyll\", \"~\u003e 3.8\" in my Gemfile this time.\n$ docker run --volume=\"$PWD:/srv/jekyll\" -i -t jekyll/jekyll:$JEKYLL_VERSION jekyll build Fetching gem metadata from https://rubygems.org/.......... Fetching gem metadata from https://rubygems.org/. You have requested: jekyll ~\u003e 3.8 The bundle currently has jekyll locked at 4.0.0. Try running `bundle update jekyll` If you are updating multiple gems in your Gemfile at once, try passing them all to `bundle update` Hmm but where is this state maintained? ","wordCount":"1354","inLanguage":"en","datePublished":"0001-01-01T00:00:00Z","dateModified":"0001-01-01T00:00:00Z","author":{"@type":"Person","name":"Michal Piekarczyk"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://michal.piekarczyk.xyz/post/2020-10-20--build-issues-again/"},"publisher":{"@type":"Organization","name":"michal.piekarczyk.xyz","logo":{"@type":"ImageObject","url":"https://michal.piekarczyk.xyz/favicon.ico"}}}</script></head><body class=dark id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://michal.piekarczyk.xyz/ accesskey=h title="michal.piekarczyk.xyz (Alt + H)">michal.piekarczyk.xyz</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://michal.piekarczyk.xyz/post/ title=posts><span>posts</span></a></li><li><a href=https://michal.piekarczyk.xyz/project/ title=projects><span>projects</span></a></li><li><a href=https://michal.piekarczyk.xyz/handy/ title=handy><span>handy</span></a></li><li><a href=https://michal.piekarczyk.xyz/tags/ title=tags><span>tags</span></a></li><li><a href=https://michal.piekarczyk.xyz/about/ title=about><span>about</span></a></li><li><a href=https://world.hey.com/michal.piekarczyk title=frivolity><span>frivolity</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://michal.piekarczyk.xyz/>Home</a>&nbsp;»&nbsp;<a href=https://michal.piekarczyk.xyz/post/>Posts</a></div><h1 class=post-title></h1><div class=post-meta>7 min&nbsp;·&nbsp;1354 words&nbsp;·&nbsp;Michal Piekarczyk</div></header><div class=post-content><h4 id=build-issues-again-haha>Build issues again haha<a hidden class=anchor aria-hidden=true href=#build-issues-again-haha>#</a></h4><p>I am doing <code>jekyll build</code> but this time from a <code>Makefile</code> , containing</p><pre tabindex=0><code>build:
    jekyll build
</code></pre><ul><li>with <code>make build</code></li><li>And I&rsquo;m getting</li></ul><pre tabindex=0><code>$ make build
jekyll build
Traceback (most recent call last):
	10: from /usr/local/lib/ruby/gems/2.6.0/bin/jekyll:23:in `&lt;main&gt;&#39;
	 9: from /usr/local/lib/ruby/gems/2.6.0/bin/jekyll:23:in `load&#39;
	 8: from /usr/local/lib/ruby/gems/2.6.0/gems/jekyll-4.0.0/exe/jekyll:11:in `&lt;top (required)&gt;&#39;
	 7: from /usr/local/lib/ruby/gems/2.6.0/gems/jekyll-4.0.0/lib/jekyll/plugin_manager.rb:52:in `require_from_bundler&#39;
	 6: from /usr/local/lib/ruby/gems/2.6.0/gems/bundler-2.0.2/lib/bundler.rb:107:in `setup&#39;
	 5: from /usr/local/lib/ruby/gems/2.6.0/gems/bundler-2.0.2/lib/bundler/runtime.rb:26:in `setup&#39;
	 4: from /usr/local/lib/ruby/gems/2.6.0/gems/bundler-2.0.2/lib/bundler/runtime.rb:26:in `map&#39;
	 3: from /usr/local/lib/ruby/gems/2.6.0/gems/bundler-2.0.2/lib/bundler/spec_set.rb:148:in `each&#39;
	 2: from /usr/local/lib/ruby/gems/2.6.0/gems/bundler-2.0.2/lib/bundler/spec_set.rb:148:in `each&#39;
	 1: from /usr/local/lib/ruby/gems/2.6.0/gems/bundler-2.0.2/lib/bundler/runtime.rb:31:in `block in setup&#39;
/usr/local/lib/ruby/gems/2.6.0/gems/bundler-2.0.2/lib/bundler/runtime.rb:319:in `check_for_activated_spec!&#39;: You have already activated public_suffix 4.0.5, but your Gemfile requires public_suffix 4.0.1. Prepending `bundle exec` to your command may solve this. (Gem::LoadError)
make: *** [build] Error 1
</code></pre><ul><li>Ok cool. Whatever that means haha. So going full Memento here, looking at <a href=/jekyll/update/meta/2020/05/30/trying-again.html>my earlier notes</a> , I see last time I used <code>gem update --system</code> to solve the problem.</li><li>So doing that again this time , and saw this output..</li></ul><pre tabindex=0><code>$ gem update --system
Updating rubygems-update
Fetching rubygems-update-3.1.4.gem
Successfully installed rubygems-update-3.1.4
Parsing documentation for rubygems-update-3.1.4
Installing ri documentation for rubygems-update-3.1.4
Installing darkfish documentation for rubygems-update-3.1.4
Done installing documentation for rubygems-update after 59 seconds
Parsing documentation for rubygems-update-3.1.4
Done installing documentation for rubygems-update after 0 seconds
Installing RubyGems 3.1.4
  Successfully built RubyGem
  Name: bundler
  Version: 2.1.4
  File: bundler-2.1.4.gem
Bundler 2.1.4 installed
RubyGems 3.1.4 installed
Regenerating binstubs
Parsing documentation for rubygems-3.1.4
Installing ri documentation for rubygems-3.1.4

=== 3.1.4 / 2020-06-03

Minor enhancements:

* Deprecate rubyforge_project attribute only during build
  time. Pull request #3609 by Josef Šimánek.
* Update links. Pull request #3610 by Josef Šimánek.
* Run CI at 3.1 branch head as well. Pull request #3677 by Josef Šimánek.
* Remove failing ubuntu-rvm CI flow. Pull request #3611 by
  Josef Šimánek.


------------------------------------------------------------------------------

RubyGems installed the following executables:
	/usr/local/Cellar/ruby/2.6.5/bin/gem
	/usr/local/Cellar/ruby/2.6.5/bin/bundle

Ruby Interactive (ri) documentation was installed. ri is kind of like man 
pages for Ruby libraries. You may access it like this:
  ri Classname
  ri Classname.class_method
  ri Classname#instance_method
If you do not wish to install this documentation in the future, use the
--no-document flag, or set it as the default in your ~/.gemrc file. See
&#39;gem help env&#39; for details.

RubyGems system software updated
You have new mail in /var/mail/michal
$ 
</code></pre><h4 id=ok-letss-try-again>ok letss try again<a hidden class=anchor aria-hidden=true href=#ok-letss-try-again>#</a></h4><pre tabindex=0><code>make build
</code></pre><ul><li><p>Darn getting same result. Ok it says to use <code>bundle exec jekyll build</code> instead. Going to try that</p></li><li><p>Ok now it did stuff&mldr;</p></li></ul><pre tabindex=0><code>$ make build
bundle exec jekyll build
Configuration file: /xxxx/repo/namoopsoo.github.io/_config.yml
            Source: /xxxx/repo/namoopsoo.github.io
       Destination: /xxxx/namoopsoo.github.io/_site
 Incremental build: disabled. Enable with --incremental
      Generating... 
             Error: could not read file /xxxx/namoopsoo.github.io/_posts/2019-05-13--keras-hello-world-fashion_files/2019-05-13--keras-hello-world-fashion_18_0.png: invalid byte sequence in UTF-8
...
...
       Jekyll Feed: Generating feed for posts
                    done in 1.715 seconds.
 Auto-regeneration: disabled. Use --watch to enable.
$ 
</code></pre><ul><li>Now it doesnt like some pngs. Maybe it worked though. Will try.</li><li>Also I forgot that as long as I don&rsquo;t want to care what this looks like locally, I can just push commits to github and then everything just builds there and nothing needs to be done locally.</li><li>Anyway but for local preview, I wonder if I can just find a jekyll docker to make this easier so as not to worry about these weird ruby configurations.</li></ul><h4 id=oh-wow-docker>Oh wow docker<a hidden class=anchor aria-hidden=true href=#oh-wow-docker>#</a></h4><ul><li>Turns out per reading <a href=https://jekyllrb.com/docs/continuous-integration/buddyworks/>here</a> , there is indeed a <a href=https://hub.docker.com/r/jekyll/jekyll/>jekyll Docker image</a> already.</li><li>Let me just test run that wow.</li></ul><pre tabindex=0><code>docker pull jekyll/jekyll
...
Digest: sha256:bb45414c3fefa80a75c5001f30baf1dff48ae31dc961b8b51003b93b60675334
Status: Downloaded newer image for jekyll/jekyll:latest
</code></pre><ul><li>But then when running from the <a href=https://github.com/envygeeks/jekyll-docker/blob/master/README.md>github</a> ,</li></ul><pre tabindex=0><code>export JEKYLL_VERSION=3.8
docker run --rm \
  --volume=&#34;$PWD:/srv/jekyll&#34; \
  -it jekyll/jekyll:$JEKYLL_VERSION 

# jekyll build &lt;= left out this part so I can look inside... 
</code></pre><ul><li>But I got this</li></ul><pre tabindex=0><code>Unable to find image &#39;jekyll/jekyll:3.8&#39; locally
3.8: Pulling from jekyll/jekyll
...
Digest: sha256:9521c8aae4739fcbc7137ead19f91841b833d671542f13e91ca40280e88d6e34
Status: Downloaded newer image for jekyll/jekyll:3.8
</code></pre><ul><li>So I suppose latesst was not <code>3.8</code>.</li><li>Anyway wow, a few minutes later this run command is still well, <em>running</em></li></ul><pre tabindex=0><code>Fetching gem metadata from https://rubygems.org/.........
Fetching public_suffix 4.0.1
Installing public_suffix 4.0.1
Fetching addressable 2.7.0
Installing addressable 2.7.0
Using bundler 2.0.2
Fetching colorator 1.1.0
Installing colorator 1.1.0
Fetching concurrent-ruby 1.1.5
Installing concurrent-ruby 1.1.5
Fetching eventmachine 1.2.7
Installing eventmachine 1.2.7 with native extensions
Fetching http_parser.rb 0.6.0
Installing http_parser.rb 0.6.0 with native extensions
Fetching em-websocket 0.5.1
Installing em-websocket 0.5.1
Fetching ffi 1.11.1
Installing ffi 1.11.1 with native extensions
Fetching forwardable-extended 2.6.0
Installing forwardable-extended 2.6.0
Fetching i18n 1.7.0
Installing i18n 1.7.0
Fetching sassc 2.2.1
Installing sassc 2.2.1 with native extensions
</code></pre><ul><li>ok continued.. that last part took a while, but the later stuff was quick.</li></ul><pre tabindex=0><code>Fetching jekyll-sass-converter 2.0.1
Installing jekyll-sass-converter 2.0.1
Fetching rb-fsevent 0.10.3
Installing rb-fsevent 0.10.3
Fetching rb-inotify 0.10.0
Installing rb-inotify 0.10.0
Fetching listen 3.2.0
Installing listen 3.2.0
Fetching jekyll-watch 2.2.1
Installing jekyll-watch 2.2.1
Fetching kramdown 2.1.0
Installing kramdown 2.1.0
Fetching kramdown-parser-gfm 1.1.0
Installing kramdown-parser-gfm 1.1.0
Fetching liquid 4.0.3
Installing liquid 4.0.3
Fetching mercenary 0.3.6
Installing mercenary 0.3.6
Fetching pathutil 0.16.2
Installing pathutil 0.16.2
Fetching rouge 3.12.0
Installing rouge 3.12.0
Fetching safe_yaml 1.0.5
Installing safe_yaml 1.0.5
Fetching unicode-display_width 1.6.0
Installing unicode-display_width 1.6.0
Fetching terminal-table 1.8.0
Installing terminal-table 1.8.0
Fetching jekyll 4.0.0
Installing jekyll 4.0.0
Fetching jekyll-feed 0.12.1
Installing jekyll-feed 0.12.1
Fetching jekyll-seo-tag 2.6.1
Installing jekyll-seo-tag 2.6.1
Fetching jekyll-sitemap 1.3.1
Installing jekyll-sitemap 1.3.1
Fetching minima 2.5.1
Installing minima 2.5.1
Bundle complete! 8 Gemfile dependencies, 31 gems now installed.
Bundled gems are installed into `/usr/local/bundle`
ruby 2.6.3p62 (2019-04-16 revision 67580) [x86_64-linux-musl]
jekyll 4.0.0 -- Jekyll is a blog-aware, static site generator in Ruby

Usage:

  jekyll &lt;subcommand&gt; [options]

Options:
        -s, --source [DIR]  Source directory (defaults to ./)
        -d, --destination [DIR]  Destination directory (defaults to ./_site)
            --safe         Safe mode (defaults to false)
        -p, --plugins PLUGINS_DIR1[,PLUGINS_DIR2[,...]]  Plugins directory (defaults to ./_plugins)
            --layouts DIR  Layouts directory (defaults to ./_layouts)
            --profile      Generate a Liquid rendering profile
        -h, --help         Show this message
        -v, --version      Print the name and version
        -t, --trace        Show the full backtrace when an error occurs

Subcommands:
  compose               
  docs                  
  import                
  build, b              Build your site
  clean                 Clean the site (removes site output and metadata file) without building.
  doctor, hyde          Search site and print specific deprecation warnings
  help                  Show the help message, optionally for a given subcommand.
  new                   Creates a new Jekyll site scaffold in PATH
  new-theme             Creates a new Jekyll theme scaffold
  serve, server, s      Serve your site locally
</code></pre><ul><li>Oops, guess I ran this poorly&mldr; wait hmm I have the interactive flags, not sure why it quit. weird.</li><li>Going to try again &mldr; and w/o the <code>--rm</code> so I dont have to redo it&mldr;</li></ul><pre tabindex=0><code>export JEKYLL_VERSION=3.8
docker run  \
  --volume=&#34;$PWD:/srv/jekyll&#34; \
  -i -t jekyll/jekyll:$JEKYLL_VERSION 
</code></pre><ul><li>Start <code>16:18 UTC .. 16:23 UTC</code> &mldr; but still not playing nice. not sure why quitting.</li><li>But the container should at least be running now hopefully..</li><li>So let me at least try build. Hmm but <code>docker ps</code> shows nothing weird.</li><li>COnfused why it&rsquo;s exiting&mldr;</li></ul><pre tabindex=0><code>$ docker ps --last 5
CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS                     PORTS                                            NAMES
9ac4abb74269        jekyll/jekyll:3.8   &#34;/usr/jekyll/bin/ent…&#34;   7 minutes ago       Exited (0) 2 minutes ago                                                    compassionate_mccarthy
</code></pre><ul><li><p>Anyway trying with <code>jekyll build</code> did work but of course it exited again, so this is not really useful if it takes <code>5 minutes</code> for stuff to happen and I can&rsquo;t keep the container around.</p></li><li><p>I do see in the <code>Dockerfile</code> <a href=https://github.com/envygeeks/jekyll-docker/blob/master/repos/jekyll/Dockerfile>here</a> that <code>4000</code> is permanently exposed so I dont even have to specify that with the <code>docker run</code> command so that&rsquo;s cool.</p></li><li><p>Hmm in the README it is written to use <code>gem "jekyll", "~> 3.8"</code> in your <code>Gemfile</code>.
My <code>Gemfile</code> has <code>"jekyll", "~> 4.0.0"</code> actually. I wonder if &mldr;</p></li><li><p>Aha and in the output it does actually show</p></li></ul><pre tabindex=0><code>Fetching jekyll 4.0.0
Installing jekyll 4.0.0
</code></pre><ul><li><p>So it is almost like this mismatch may have caused this to be taking extra time.</p></li><li><p>So probably the <code>Gemfile</code> should be consistent with this docker image and then it will not take <code>5 bonus minutes</code> ?</p></li><li><p>Maybe this phenomenon is described <a href=https://github.com/envygeeks/jekyll-docker#my-gems-arent-caching>here</a> &ldquo;my gems arent caching&rdquo;&mldr;. Ok so I&rsquo;m diverging indeed ok.</p></li><li><p>Ok trying again w/ <code>gem "jekyll", "~> 3.8"</code> in my Gemfile this time.</p></li></ul><pre tabindex=0><code>$ docker run    --volume=&#34;$PWD:/srv/jekyll&#34;   -i -t jekyll/jekyll:$JEKYLL_VERSION jekyll build

Fetching gem metadata from https://rubygems.org/..........
Fetching gem metadata from https://rubygems.org/.
You have requested:
  jekyll ~&gt; 3.8

The bundle currently has jekyll locked at 4.0.0.
Try running `bundle update jekyll`

If you are updating multiple gems in your Gemfile at once,
try passing them all to `bundle update`
</code></pre><ul><li>Hmm but where is this state maintained?</li></ul></div><footer class=post-footer><ul class=post-tags></ul><nav class=paginav><a class=prev href=https://michal.piekarczyk.xyz/post/2020-06-06-heart-datar/><span class=title>« Prev</span><br><span></span></a>
<a class=next href=https://michal.piekarczyk.xyz/post/2020-11-14-georgia-recount-stats/><span class=title>Next »</span><br><span></span></a></nav></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://michal.piekarczyk.xyz/>michal.piekarczyk.xyz</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>