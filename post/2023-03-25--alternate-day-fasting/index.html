<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Alternate Day Feasting | michal.piekarczyk.xyz</title><meta name=keywords content="fasting,nutrition"><meta name=description content="First Stab at Alternate Day Feasting Wait Don&rsquo;t you mean Alternate Day Fasting? Haha yes but I am still working up to the level of stoicism required to do proper Alternate Day Fasting and a low stress life also helps especially if you rely on snacks to counter the stress of the daily Work-From-Home-Wake-Up-Surprise-You-Are-At-Work-And-Work-Throughout-The-Entire-Day-Life haha!
But having already been doing Time Restricted Feeding for several years now, I think I have the stoicism requirements to at least give Alternate Day Feasting a go, which is basically aiming at calorie restriction every other day."><meta name=author content="Michal Piekarczyk"><link rel=canonical href=https://michal.piekarczyk.xyz/post/2023-03-25--alternate-day-fasting/><link crossorigin=anonymous href=/assets/css/stylesheet.dd867d536fb6202811c1ee15fa181ef8945826662b49d3016ac91365a2621d58.css integrity="sha256-3YZ9U2+2ICgRwe4V+hge+JRYJmYrSdMBaskTZaJiHVg=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://michal.piekarczyk.xyz/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://michal.piekarczyk.xyz/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://michal.piekarczyk.xyz/favicon-32x32.png><link rel=apple-touch-icon href=https://michal.piekarczyk.xyz/apple-touch-icon.png><link rel=mask-icon href=https://michal.piekarczyk.xyz/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-74MK08REDT"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-74MK08REDT",{anonymize_ip:!1})}</script><meta property="og:title" content="Alternate Day Feasting"><meta property="og:description" content="First Stab at Alternate Day Feasting Wait Don&rsquo;t you mean Alternate Day Fasting? Haha yes but I am still working up to the level of stoicism required to do proper Alternate Day Fasting and a low stress life also helps especially if you rely on snacks to counter the stress of the daily Work-From-Home-Wake-Up-Surprise-You-Are-At-Work-And-Work-Throughout-The-Entire-Day-Life haha!
But having already been doing Time Restricted Feeding for several years now, I think I have the stoicism requirements to at least give Alternate Day Feasting a go, which is basically aiming at calorie restriction every other day."><meta property="og:type" content="article"><meta property="og:url" content="https://michal.piekarczyk.xyz/post/2023-03-25--alternate-day-fasting/"><meta property="og:image" content="https://s3.amazonaws.com/my-blog-content/2023/2023-03-25-Alternate-Day-Feasting/2023-03-26T191146-figure_1679859645507_0.png"><meta property="article:section" content="post"><meta property="article:published_time" content="2023-03-25T00:00:00+00:00"><meta property="article:modified_time" content="2023-03-25T00:00:00+00:00"><meta property="og:site_name" content="michal.piekarczyk.xyz"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://s3.amazonaws.com/my-blog-content/2023/2023-03-25-Alternate-Day-Feasting/2023-03-26T191146-figure_1679859645507_0.png"><meta name=twitter:title content="Alternate Day Feasting"><meta name=twitter:description content="First Stab at Alternate Day Feasting Wait Don&rsquo;t you mean Alternate Day Fasting? Haha yes but I am still working up to the level of stoicism required to do proper Alternate Day Fasting and a low stress life also helps especially if you rely on snacks to counter the stress of the daily Work-From-Home-Wake-Up-Surprise-You-Are-At-Work-And-Work-Throughout-The-Entire-Day-Life haha!
But having already been doing Time Restricted Feeding for several years now, I think I have the stoicism requirements to at least give Alternate Day Feasting a go, which is basically aiming at calorie restriction every other day."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://michal.piekarczyk.xyz/post/"},{"@type":"ListItem","position":2,"name":"Alternate Day Feasting","item":"https://michal.piekarczyk.xyz/post/2023-03-25--alternate-day-fasting/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Alternate Day Feasting","name":"Alternate Day Feasting","description":"First Stab at Alternate Day Feasting Wait Don\u0026rsquo;t you mean Alternate Day Fasting? Haha yes but I am still working up to the level of stoicism required to do proper Alternate Day Fasting and a low stress life also helps especially if you rely on snacks to counter the stress of the daily Work-From-Home-Wake-Up-Surprise-You-Are-At-Work-And-Work-Throughout-The-Entire-Day-Life haha!\nBut having already been doing Time Restricted Feeding for several years now, I think I have the stoicism requirements to at least give Alternate Day Feasting a go, which is basically aiming at calorie restriction every other day.","keywords":["fasting","nutrition"],"articleBody":"First Stab at Alternate Day Feasting Wait Don’t you mean Alternate Day Fasting? Haha yes but I am still working up to the level of stoicism required to do proper Alternate Day Fasting and a low stress life also helps especially if you rely on snacks to counter the stress of the daily Work-From-Home-Wake-Up-Surprise-You-Are-At-Work-And-Work-Throughout-The-Entire-Day-Life haha!\nBut having already been doing Time Restricted Feeding for several years now, I think I have the stoicism requirements to at least give Alternate Day Feasting a go, which is basically aiming at calorie restriction every other day.\nI have pulled my daily calorie data from Carb Manager and electronic weigh-in data from a Withings scale I have. The first plot I did looks like\nbut maybe it is a bit noisy since it has all the data for each day, so trying also a 7 day average too,\nAlso tried , 7 day sum too, So What happened? Well the whole reason I started looking at all this was that I started a Work From Home job in December 2021 and although prior to that, I used to bike-commute to work every day, now bike rides in 2022 I admit have been way shorter, say, 3 to 6 miles a day as opposed to 12+ miles a day.\nAnd alarmingly I saw my weight go up in 2022, perhaps similar to what I recall Iñigo San-Millán described in this interview, https://peterattiamd.com/inigosanmillan/ with Peter Attia , about cyclists who reduce their cycling without reducing their calorie intake.\nOf course I was nowhere near a professional cyclist and I’m sure the weight gain is related to a lack of stress management to a large extent, but nevertheless, basically starting 2023, every other day, I aimed for a lower amount of calories.\nThe first plot above does not show this very well, but the second chart, which takes 7-day averages, hopefully does a better job.\nThere are also other behavior changes I’m trying too that are not being plotted here, including the replacement of highly processed food with slightly less processed food and also improving the overall protein to energy ratio.\nHow to generate these plots? There was a bit of trial and error I can describe later, but basically,\nimport os import numpy as np import matplotlib.pyplot as plt import pandas as pd import pylab from pathlib import Path from datetime import datetime, date, timedelta from core.date_utils import utc_ts def make_xtick_labels(x, step=5): '''Given x, step the labels every Aka, take every th x label ''' x_ticks = [i for i in range(len(x)) if i % step == 0] x_labels = [x[i] for i in x_ticks] return x_ticks, x_labels root_dir = Path(os.getenv(\"ROOT_DIR\")) def get_data(): # Prepare food df food_logs_loc = (root_dir / \"CarbManager/daily_logs_20210312-20230318_fe628b90-9859-4259-ab49-1ba3ce95b90c.csv\") food_df = pd.read_csv(food_logs_loc) cols = [\"RawDate\", \"Meal\", \"Calories\"] food_df[\"RawDate\"] = food_df[\"Date\"].map(lambda x: x.split(\" \")[0]) food_df[food_df.Meal.isin([\"Snack\", \"Dinner\", \"Lunch\", \"Breakfast\"])][cols].iloc[-10:] food_agg_df = food_df[[\"RawDate\", \"Calories\"]].groupby(by=[\"RawDate\"]).sum().reset_index() weight_loc = root_dir / (\"withings/2023-03-18-data_MIC_1679186118/weight.csv\") weight_df = pd.read_csv(weight_loc) cols = [\"Date\", \"Weight (lb)\"] weight_df[cols].sort_values(by=\"Date\").iloc[-10:] weight_df[\"RawDate\"] = weight_df[\"Date\"].map(lambda x: x.split(\" \")[0]) cols = [\"RawDate\", \"Weight (lb)\"] weight_agg_df = weight_df[cols].groupby(by=\"RawDate\").min().reset_index() return food_agg_df, weight_agg_df def find_closest_date(dates, date): \"\"\" Examples In [13]: from datetime import datetime, timedelta ...: ...: start_date = datetime(2022, 1, 1) ...: dates = [start_date + timedelta(days=x) for x in range(1000)] In [14]: find_closest_date(dates, datetime(2023, 1, 1)) Out[14]: datetime.datetime(2023, 1, 1, 0, 0) In [15]: start_date = datetime(2022, 1, 1) ...: dates = [start_date + timedelta(days=7) for x in range(1000)] In [16]: find_closest_date(dates, datetime(2023, 1, 1)) Out[16]: datetime.datetime(2022, 1, 8, 0, 0) \"\"\" assert dates smallest = np.inf closest_date = None for x in sorted(dates): if delta := (x - date).total_seconds() \u003c smallest: closest_date = x smallest = delta else: break assert closest_date return closest_date def plot_data(food_agg_df, weight_agg_df, start_date, end_date, labels=None): fig = plt.figure(figsize=(12, 4)) ax1 = fig.add_subplot(111) color = \"tab:blue\" weight_label = labels.get(\"weight_label\", \"Weight (lb)\") food_label = labels.get(\"food_label\", \"Calories\") ax1.set_ylabel(weight_label, color=color) narrowed_df1 = weight_agg_df[ weight_agg_df[\"RawDate\"] \u003e= start_date.strftime(\"%Y-%m-%d\") ] data1 = narrowed_df1.to_dict(orient=\"list\") x1, y1 = data1[\"RawDate\"], data1[\"Weight (lb)\"] X = narrowed_df1[\"RawDate\"].tolist() x_ticks, x_labels = make_xtick_labels(X, step=3) ax1.set_xticks(x_ticks) ax1.set_xticklabels(x_labels, rotation=-45) ax1.plot(x1, y1, color=color) # vertical labels if labels: if v_labels := labels.get(\"v_labels\"): for (k, v) in v_labels.items(): # Find closest value to k, in x_labels, closeset = find_closest_date( [datetime.strptime(x, \"%Y-%m-%d\") for x in x_labels], datetime.strptime(k, \"%Y-%m-%d\") ) ax1.axvline(closeset.strftime(\"%Y-%m-%d\"), label=v) # Flip, ax2 = ax1.twinx() data2 = food_agg_df[food_agg_df[\"RawDate\"] \u003e= start_date.strftime(\"%Y-%m-%d\")].to_dict( orient=\"list\" ) color = \"tab:red\" x2, y2 = data2[\"RawDate\"], data2[\"Calories\"] ax2.plot(x2, y2, color=color) ax2.set_xlabel(\"Date\") ax2.set_ylabel(food_label, color=color) out_loc = f\"output-data/{utc_ts()}-figure.png\" ax1.legend() ax1.grid(True) print(\"out_loc\", out_loc) pylab.savefig(out_loc, bbox_inches=\"tight\") def bucket_n_days(df, days, aggregate_type): \"\"\" Aggregate days with mean or sum. \"\"\" df[\"timestamp\"] = pd.to_datetime(df[\"RawDate\"]) if aggregate_type == \"mean\": agg_df = df.groupby(pd.Grouper(key=\"timestamp\", freq=f\"{days}D\")).mean().reset_index() elif aggregate_type == \"sum\": agg_df = df.groupby(pd.Grouper(key=\"timestamp\", freq=f\"{days}D\")).sum().reset_index() agg_df[\"RawDate\"] = agg_df[\"timestamp\"].map(lambda x: x.strftime(\"%Y-%m-%d\")) return agg_df # Plot day by day data, food_agg_df, weight_agg_df = get_data() start_date = date(2022, 1, 1) # \"2023-01-01\" end_date = date(2023, 3, 17) plot_data( food_agg_df, weight_agg_df, start_date, end_date, labels={ \"vlabels\": {\"2023-01-01\": \"ADF starts\"}, \"food_label\": \"Calories\", \"weight_label\": \"Weight (lb)\", }, ) # Try 3 day average of weight, and 3 day total, for calories, # weight_agg_3day_df = bucket_n_days(weight_agg_df, 3) # food_agg_3day_df = bucket_n_days(food_agg_df, 3) # plot_data(food_agg_3day_df, weight_agg_3day_df, start_date, end_date) # Try 7 days weight_agg_7day_df = bucket_n_days(weight_agg_df, 7, aggregate_type=\"mean\") food_agg_7day_df = bucket_n_days(food_agg_df, 7, aggregate_type=\"mean\") plot_data( food_agg_7day_df, weight_agg_7day_df, start_date, end_date, labels={ \"v_labels\": {\"2023-01-01\": \"ADF starts\"}, \"food_label\": \"Calories 7 day mean\", \"weight_label\": \"Weight (lb) 7 day mean\", }, ) # Sum agg instead food_agg_7day_df = bucket_n_days(food_agg_df, 7, aggregate_type=\"sum\") plot_data( food_agg_7day_df, weight_agg_7day_df, start_date, end_date, labels={ \"v_labels\": {\"2023-01-01\": \"ADF starts\"}, \"food_label\": \"Calories 7 day sum\", \"weight_label\": \"Weight (lb) 7 day mean\", }, ) I am doing the version control on github, too.\n","wordCount":"924","inLanguage":"en","image":"https://s3.amazonaws.com/my-blog-content/2023/2023-03-25-Alternate-Day-Feasting/2023-03-26T191146-figure_1679859645507_0.png","datePublished":"2023-03-25T00:00:00Z","dateModified":"2023-03-25T00:00:00Z","author":{"@type":"Person","name":"Michal Piekarczyk"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://michal.piekarczyk.xyz/post/2023-03-25--alternate-day-fasting/"},"publisher":{"@type":"Organization","name":"michal.piekarczyk.xyz","logo":{"@type":"ImageObject","url":"https://michal.piekarczyk.xyz/favicon.ico"}}}</script></head><body class=dark id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://michal.piekarczyk.xyz/ accesskey=h title="michal.piekarczyk.xyz (Alt + H)">michal.piekarczyk.xyz</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://michal.piekarczyk.xyz/post/ title=posts><span>posts</span></a></li><li><a href=https://michal.piekarczyk.xyz/project/ title=projects><span>projects</span></a></li><li><a href=https://michal.piekarczyk.xyz/handy/ title=handy><span>handy</span></a></li><li><a href=https://michal.piekarczyk.xyz/search/ title="search (Alt + /)" accesskey=/><span>search</span></a></li><li><a href=https://michal.piekarczyk.xyz/about/ title=about><span>about</span></a></li><li><a href=https://world.hey.com/michal.piekarczyk title=frivolity><span>frivolity</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://michal.piekarczyk.xyz/>Home</a>&nbsp;»&nbsp;<a href=https://michal.piekarczyk.xyz/post/>Posts</a></div><h1 class=post-title>Alternate Day Feasting</h1><div class=post-meta><span title='2023-03-25 00:00:00 +0000 UTC'>252525-25-2512</span>&nbsp;·&nbsp;5 min&nbsp;·&nbsp;924 words&nbsp;·&nbsp;Michal Piekarczyk</div></header><figure class=entry-cover><img loading=lazy src=https://s3.amazonaws.com/my-blog-content/2023/2023-03-25-Alternate-Day-Feasting/2023-03-26T191146-figure_1679859645507_0.png alt></figure><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><ul><li><a href=#first-stab-at-alternate-day-feasting>First Stab at Alternate Day Feasting</a></li></ul></li></ul></nav></div></details></div><div class=post-content><h3 id=first-stab-at-alternate-day-feasting>First Stab at Alternate Day Feasting<a hidden class=anchor aria-hidden=true href=#first-stab-at-alternate-day-feasting>#</a></h3><h4 id=wait-dont-you-mean-alternate-day-fasting>Wait Don&rsquo;t you mean Alternate Day Fasting?<a hidden class=anchor aria-hidden=true href=#wait-dont-you-mean-alternate-day-fasting>#</a></h4><p>Haha yes but I am still working up to the level of stoicism required to do proper Alternate Day Fasting and a low stress life also helps especially if you rely on snacks to counter the stress of the daily Work-From-Home-Wake-Up-Surprise-You-Are-At-Work-And-Work-Throughout-The-Entire-Day-Life haha!</p><p>But having already been doing Time Restricted Feeding for several years now, I think I have the stoicism requirements to at least give Alternate Day Feasting a go, which is basically aiming at calorie restriction every other day.</p><h4 id=i-have-pulled-my-daily-calorie-data-from-carb-manager-and-electronic-weigh-in-data-from-a-withings-scale-i-have>I have pulled my daily calorie data from Carb Manager and electronic weigh-in data from a Withings scale I have.<a hidden class=anchor aria-hidden=true href=#i-have-pulled-my-daily-calorie-data-from-carb-manager-and-electronic-weigh-in-data-from-a-withings-scale-i-have>#</a></h4><p>The first plot I did looks like</p><figure><img loading=lazy src=https://s3.amazonaws.com/my-blog-content/2023/2023-03-25-Alternate-Day-Feasting/2023-03-25T175301-figure-flip-the-order_1679801795782_0.png width=90%></figure><p>but maybe it is a bit noisy since it has all the data for each day, so trying also a 7 day average too,</p><figure><img loading=lazy src=https://s3.amazonaws.com/my-blog-content/2023/2023-03-25-Alternate-Day-Feasting/2023-03-26T204315-figure_1679863701207_0.png width=90%></figure><p>Also tried , 7 day sum too,<figure><img loading=lazy src=https://s3.amazonaws.com/my-blog-content/2023/2023-03-25-Alternate-Day-Feasting/2023-03-26T204150-figure_1679863710325_0.png width=90%></figure></p><h4 id=so-what-happened>So What happened?<a hidden class=anchor aria-hidden=true href=#so-what-happened>#</a></h4><p>Well the whole reason I started looking at all this was that I started a Work From Home job in December 2021 and although prior to that, I used to bike-commute to work every day, now bike rides in 2022 I admit have been way shorter, say, 3 to 6 miles a day as opposed to 12+ miles a day.</p><p>And alarmingly I saw my weight go up in 2022, perhaps similar to what I recall Iñigo San-Millán described in this interview, <a href=https://peterattiamd.com/inigosanmillan/>https://peterattiamd.com/inigosanmillan/</a> with Peter Attia , about cyclists who reduce their cycling without reducing their calorie intake.</p><p>Of course I was nowhere near a professional cyclist and I&rsquo;m sure the weight gain is related to a lack of stress management to a large extent, but nevertheless, basically starting 2023, every other day, I aimed for a lower amount of calories.</p><p>The first plot above does not show this very well, but the second chart, which takes 7-day averages, hopefully does a better job.</p><p>There are also other behavior changes I&rsquo;m trying too that are not being plotted here, including the replacement of highly processed food with slightly less processed food and also improving the overall <a href=https://www.dietdoctor.com/high-protein/eat-more-protein>protein to energy ratio</a>.</p><h4 id=how-to-generate-these-plots>How to generate these plots?<a hidden class=anchor aria-hidden=true href=#how-to-generate-these-plots>#</a></h4><p>There was a bit of trial and error I can describe later, but basically,</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>import</span> os
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> numpy <span style=color:#66d9ef>as</span> np
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> matplotlib.pyplot <span style=color:#66d9ef>as</span> plt
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> pandas <span style=color:#66d9ef>as</span> pd
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> pylab
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> pathlib <span style=color:#f92672>import</span> Path
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> datetime <span style=color:#f92672>import</span> datetime, date, timedelta
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> core.date_utils <span style=color:#f92672>import</span> utc_ts
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>make_xtick_labels</span>(x, step<span style=color:#f92672>=</span><span style=color:#ae81ff>5</span>):
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;&#39;&#39;Given x, step the labels every &lt;step&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    Aka, take every &lt;step&gt;th x label
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#39;&#39;&#39;</span>
</span></span><span style=display:flex><span>    x_ticks <span style=color:#f92672>=</span> [i <span style=color:#66d9ef>for</span> i <span style=color:#f92672>in</span>  range(len(x)) <span style=color:#66d9ef>if</span> i <span style=color:#f92672>%</span> step <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span>]
</span></span><span style=display:flex><span>    x_labels <span style=color:#f92672>=</span> [x[i] <span style=color:#66d9ef>for</span> i <span style=color:#f92672>in</span> x_ticks]
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> x_ticks, x_labels
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>root_dir <span style=color:#f92672>=</span> Path(os<span style=color:#f92672>.</span>getenv(<span style=color:#e6db74>&#34;ROOT_DIR&#34;</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>get_data</span>():
</span></span><span style=display:flex><span>    <span style=color:#75715e># Prepare food df</span>
</span></span><span style=display:flex><span>    food_logs_loc <span style=color:#f92672>=</span> (root_dir <span style=color:#f92672>/</span> <span style=color:#e6db74>&#34;CarbManager/daily_logs_20210312-20230318_fe628b90-9859-4259-ab49-1ba3ce95b90c.csv&#34;</span>)
</span></span><span style=display:flex><span>    food_df <span style=color:#f92672>=</span> pd<span style=color:#f92672>.</span>read_csv(food_logs_loc)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    cols <span style=color:#f92672>=</span> [<span style=color:#e6db74>&#34;RawDate&#34;</span>, <span style=color:#e6db74>&#34;Meal&#34;</span>, <span style=color:#e6db74>&#34;Calories&#34;</span>]
</span></span><span style=display:flex><span>    food_df[<span style=color:#e6db74>&#34;RawDate&#34;</span>] <span style=color:#f92672>=</span> food_df[<span style=color:#e6db74>&#34;Date&#34;</span>]<span style=color:#f92672>.</span>map(<span style=color:#66d9ef>lambda</span> x: x<span style=color:#f92672>.</span>split(<span style=color:#e6db74>&#34; &#34;</span>)[<span style=color:#ae81ff>0</span>])
</span></span><span style=display:flex><span>    food_df[food_df<span style=color:#f92672>.</span>Meal<span style=color:#f92672>.</span>isin([<span style=color:#e6db74>&#34;Snack&#34;</span>, <span style=color:#e6db74>&#34;Dinner&#34;</span>, <span style=color:#e6db74>&#34;Lunch&#34;</span>, <span style=color:#e6db74>&#34;Breakfast&#34;</span>])][cols]<span style=color:#f92672>.</span>iloc[<span style=color:#f92672>-</span><span style=color:#ae81ff>10</span>:]
</span></span><span style=display:flex><span>    food_agg_df <span style=color:#f92672>=</span> food_df[[<span style=color:#e6db74>&#34;RawDate&#34;</span>, <span style=color:#e6db74>&#34;Calories&#34;</span>]]<span style=color:#f92672>.</span>groupby(by<span style=color:#f92672>=</span>[<span style=color:#e6db74>&#34;RawDate&#34;</span>])<span style=color:#f92672>.</span>sum()<span style=color:#f92672>.</span>reset_index()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    weight_loc <span style=color:#f92672>=</span> root_dir <span style=color:#f92672>/</span> (<span style=color:#e6db74>&#34;withings/2023-03-18-data_MIC_1679186118/weight.csv&#34;</span>)
</span></span><span style=display:flex><span>    weight_df <span style=color:#f92672>=</span> pd<span style=color:#f92672>.</span>read_csv(weight_loc)
</span></span><span style=display:flex><span>    cols <span style=color:#f92672>=</span> [<span style=color:#e6db74>&#34;Date&#34;</span>, <span style=color:#e6db74>&#34;Weight (lb)&#34;</span>]
</span></span><span style=display:flex><span>    weight_df[cols]<span style=color:#f92672>.</span>sort_values(by<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;Date&#34;</span>)<span style=color:#f92672>.</span>iloc[<span style=color:#f92672>-</span><span style=color:#ae81ff>10</span>:]
</span></span><span style=display:flex><span>    weight_df[<span style=color:#e6db74>&#34;RawDate&#34;</span>] <span style=color:#f92672>=</span> weight_df[<span style=color:#e6db74>&#34;Date&#34;</span>]<span style=color:#f92672>.</span>map(<span style=color:#66d9ef>lambda</span> x: x<span style=color:#f92672>.</span>split(<span style=color:#e6db74>&#34; &#34;</span>)[<span style=color:#ae81ff>0</span>])
</span></span><span style=display:flex><span>    cols <span style=color:#f92672>=</span> [<span style=color:#e6db74>&#34;RawDate&#34;</span>, <span style=color:#e6db74>&#34;Weight (lb)&#34;</span>]
</span></span><span style=display:flex><span>    weight_agg_df <span style=color:#f92672>=</span> weight_df[cols]<span style=color:#f92672>.</span>groupby(by<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;RawDate&#34;</span>)<span style=color:#f92672>.</span>min()<span style=color:#f92672>.</span>reset_index()
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> food_agg_df, weight_agg_df
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>find_closest_date</span>(dates, date):
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    Examples 
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    In [13]: from datetime import datetime, timedelta
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        ...: 
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        ...: start_date = datetime(2022, 1, 1)
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        ...: dates = [start_date + timedelta(days=x) for x in range(1000)]
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    In [14]: find_closest_date(dates, datetime(2023, 1, 1))
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    Out[14]: datetime.datetime(2023, 1, 1, 0, 0)
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    In [15]: start_date = datetime(2022, 1, 1)
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        ...: dates = [start_date + timedelta(days=7) for x in range(1000)]
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    In [16]: find_closest_date(dates, datetime(2023, 1, 1))
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    Out[16]: datetime.datetime(2022, 1, 8, 0, 0)
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>assert</span> dates
</span></span><span style=display:flex><span>    smallest <span style=color:#f92672>=</span> np<span style=color:#f92672>.</span>inf
</span></span><span style=display:flex><span>    closest_date <span style=color:#f92672>=</span> <span style=color:#66d9ef>None</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> x <span style=color:#f92672>in</span> sorted(dates):
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> delta <span style=color:#f92672>:=</span> (x <span style=color:#f92672>-</span> date)<span style=color:#f92672>.</span>total_seconds() <span style=color:#f92672>&lt;</span> smallest:
</span></span><span style=display:flex><span>            closest_date <span style=color:#f92672>=</span> x
</span></span><span style=display:flex><span>            smallest <span style=color:#f92672>=</span> delta
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>else</span>:
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>break</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>assert</span> closest_date
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> closest_date
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>plot_data</span>(food_agg_df, weight_agg_df, start_date, end_date, labels<span style=color:#f92672>=</span><span style=color:#66d9ef>None</span>):
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    fig <span style=color:#f92672>=</span> plt<span style=color:#f92672>.</span>figure(figsize<span style=color:#f92672>=</span>(<span style=color:#ae81ff>12</span>, <span style=color:#ae81ff>4</span>))
</span></span><span style=display:flex><span>    ax1 <span style=color:#f92672>=</span> fig<span style=color:#f92672>.</span>add_subplot(<span style=color:#ae81ff>111</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    color <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;tab:blue&#34;</span>
</span></span><span style=display:flex><span>    weight_label <span style=color:#f92672>=</span> labels<span style=color:#f92672>.</span>get(<span style=color:#e6db74>&#34;weight_label&#34;</span>, <span style=color:#e6db74>&#34;Weight (lb)&#34;</span>)
</span></span><span style=display:flex><span>    food_label <span style=color:#f92672>=</span> labels<span style=color:#f92672>.</span>get(<span style=color:#e6db74>&#34;food_label&#34;</span>, <span style=color:#e6db74>&#34;Calories&#34;</span>)
</span></span><span style=display:flex><span>    ax1<span style=color:#f92672>.</span>set_ylabel(weight_label, color<span style=color:#f92672>=</span>color)
</span></span><span style=display:flex><span>    narrowed_df1 <span style=color:#f92672>=</span> weight_agg_df[
</span></span><span style=display:flex><span>        weight_agg_df[<span style=color:#e6db74>&#34;RawDate&#34;</span>] <span style=color:#f92672>&gt;=</span> start_date<span style=color:#f92672>.</span>strftime(<span style=color:#e6db74>&#34;%Y-%m-</span><span style=color:#e6db74>%d</span><span style=color:#e6db74>&#34;</span>)
</span></span><span style=display:flex><span>    ]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    data1 <span style=color:#f92672>=</span> narrowed_df1<span style=color:#f92672>.</span>to_dict(orient<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;list&#34;</span>)
</span></span><span style=display:flex><span>    x1, y1 <span style=color:#f92672>=</span> data1[<span style=color:#e6db74>&#34;RawDate&#34;</span>], data1[<span style=color:#e6db74>&#34;Weight (lb)&#34;</span>]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    X <span style=color:#f92672>=</span> narrowed_df1[<span style=color:#e6db74>&#34;RawDate&#34;</span>]<span style=color:#f92672>.</span>tolist()
</span></span><span style=display:flex><span>    x_ticks, x_labels <span style=color:#f92672>=</span> make_xtick_labels(X, step<span style=color:#f92672>=</span><span style=color:#ae81ff>3</span>)
</span></span><span style=display:flex><span>    ax1<span style=color:#f92672>.</span>set_xticks(x_ticks)
</span></span><span style=display:flex><span>    ax1<span style=color:#f92672>.</span>set_xticklabels(x_labels, rotation<span style=color:#f92672>=-</span><span style=color:#ae81ff>45</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    ax1<span style=color:#f92672>.</span>plot(x1, y1, color<span style=color:#f92672>=</span>color)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># vertical labels</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> labels:
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> v_labels <span style=color:#f92672>:=</span> labels<span style=color:#f92672>.</span>get(<span style=color:#e6db74>&#34;v_labels&#34;</span>):
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>for</span> (k, v) <span style=color:#f92672>in</span> v_labels<span style=color:#f92672>.</span>items():
</span></span><span style=display:flex><span>                <span style=color:#75715e># Find closest value to k, in x_labels,</span>
</span></span><span style=display:flex><span>                closeset <span style=color:#f92672>=</span> find_closest_date(
</span></span><span style=display:flex><span>                    [datetime<span style=color:#f92672>.</span>strptime(x, <span style=color:#e6db74>&#34;%Y-%m-</span><span style=color:#e6db74>%d</span><span style=color:#e6db74>&#34;</span>) <span style=color:#66d9ef>for</span> x <span style=color:#f92672>in</span> x_labels],
</span></span><span style=display:flex><span>                    datetime<span style=color:#f92672>.</span>strptime(k, <span style=color:#e6db74>&#34;%Y-%m-</span><span style=color:#e6db74>%d</span><span style=color:#e6db74>&#34;</span>)
</span></span><span style=display:flex><span>                )
</span></span><span style=display:flex><span>                ax1<span style=color:#f92672>.</span>axvline(closeset<span style=color:#f92672>.</span>strftime(<span style=color:#e6db74>&#34;%Y-%m-</span><span style=color:#e6db74>%d</span><span style=color:#e6db74>&#34;</span>), label<span style=color:#f92672>=</span>v)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Flip,</span>
</span></span><span style=display:flex><span>    ax2 <span style=color:#f92672>=</span> ax1<span style=color:#f92672>.</span>twinx()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    data2 <span style=color:#f92672>=</span> food_agg_df[food_agg_df[<span style=color:#e6db74>&#34;RawDate&#34;</span>] <span style=color:#f92672>&gt;=</span> start_date<span style=color:#f92672>.</span>strftime(<span style=color:#e6db74>&#34;%Y-%m-</span><span style=color:#e6db74>%d</span><span style=color:#e6db74>&#34;</span>)]<span style=color:#f92672>.</span>to_dict(
</span></span><span style=display:flex><span>        orient<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;list&#34;</span>
</span></span><span style=display:flex><span>    )
</span></span><span style=display:flex><span>    color <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;tab:red&#34;</span>
</span></span><span style=display:flex><span>    x2, y2 <span style=color:#f92672>=</span> data2[<span style=color:#e6db74>&#34;RawDate&#34;</span>], data2[<span style=color:#e6db74>&#34;Calories&#34;</span>]
</span></span><span style=display:flex><span>    ax2<span style=color:#f92672>.</span>plot(x2, y2, color<span style=color:#f92672>=</span>color)
</span></span><span style=display:flex><span>    ax2<span style=color:#f92672>.</span>set_xlabel(<span style=color:#e6db74>&#34;Date&#34;</span>)
</span></span><span style=display:flex><span>    ax2<span style=color:#f92672>.</span>set_ylabel(food_label, color<span style=color:#f92672>=</span>color)
</span></span><span style=display:flex><span>    out_loc <span style=color:#f92672>=</span> <span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;output-data/</span><span style=color:#e6db74>{</span>utc_ts()<span style=color:#e6db74>}</span><span style=color:#e6db74>-figure.png&#34;</span>
</span></span><span style=display:flex><span>    ax1<span style=color:#f92672>.</span>legend()
</span></span><span style=display:flex><span>    ax1<span style=color:#f92672>.</span>grid(<span style=color:#66d9ef>True</span>)
</span></span><span style=display:flex><span>    print(<span style=color:#e6db74>&#34;out_loc&#34;</span>, out_loc)
</span></span><span style=display:flex><span>    pylab<span style=color:#f92672>.</span>savefig(out_loc, bbox_inches<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;tight&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>bucket_n_days</span>(df, days, aggregate_type):
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;&#34;&#34; Aggregate days with mean or sum.
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>    df[<span style=color:#e6db74>&#34;timestamp&#34;</span>] <span style=color:#f92672>=</span> pd<span style=color:#f92672>.</span>to_datetime(df[<span style=color:#e6db74>&#34;RawDate&#34;</span>])
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> aggregate_type <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;mean&#34;</span>:
</span></span><span style=display:flex><span>        agg_df <span style=color:#f92672>=</span> df<span style=color:#f92672>.</span>groupby(pd<span style=color:#f92672>.</span>Grouper(key<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;timestamp&#34;</span>, freq<span style=color:#f92672>=</span><span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>{</span>days<span style=color:#e6db74>}</span><span style=color:#e6db74>D&#34;</span>))<span style=color:#f92672>.</span>mean()<span style=color:#f92672>.</span>reset_index()
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>elif</span> aggregate_type <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;sum&#34;</span>:
</span></span><span style=display:flex><span>        agg_df <span style=color:#f92672>=</span> df<span style=color:#f92672>.</span>groupby(pd<span style=color:#f92672>.</span>Grouper(key<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;timestamp&#34;</span>, freq<span style=color:#f92672>=</span><span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>{</span>days<span style=color:#e6db74>}</span><span style=color:#e6db74>D&#34;</span>))<span style=color:#f92672>.</span>sum()<span style=color:#f92672>.</span>reset_index()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    agg_df[<span style=color:#e6db74>&#34;RawDate&#34;</span>] <span style=color:#f92672>=</span> agg_df[<span style=color:#e6db74>&#34;timestamp&#34;</span>]<span style=color:#f92672>.</span>map(<span style=color:#66d9ef>lambda</span> x: x<span style=color:#f92672>.</span>strftime(<span style=color:#e6db74>&#34;%Y-%m-</span><span style=color:#e6db74>%d</span><span style=color:#e6db74>&#34;</span>))
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> agg_df
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Plot day by day data,</span>
</span></span><span style=display:flex><span>food_agg_df, weight_agg_df <span style=color:#f92672>=</span> get_data()
</span></span><span style=display:flex><span>start_date <span style=color:#f92672>=</span> date(<span style=color:#ae81ff>2022</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>) <span style=color:#75715e># &#34;2023-01-01&#34;</span>
</span></span><span style=display:flex><span>end_date <span style=color:#f92672>=</span> date(<span style=color:#ae81ff>2023</span>, <span style=color:#ae81ff>3</span>, <span style=color:#ae81ff>17</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>plot_data(
</span></span><span style=display:flex><span>    food_agg_df, weight_agg_df, start_date, end_date,
</span></span><span style=display:flex><span>    labels<span style=color:#f92672>=</span>{
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;vlabels&#34;</span>: {<span style=color:#e6db74>&#34;2023-01-01&#34;</span>: <span style=color:#e6db74>&#34;ADF starts&#34;</span>},
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;food_label&#34;</span>: <span style=color:#e6db74>&#34;Calories&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;weight_label&#34;</span>: <span style=color:#e6db74>&#34;Weight (lb)&#34;</span>,
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Try 3 day average of weight, and 3 day total, for calories, </span>
</span></span><span style=display:flex><span><span style=color:#75715e># weight_agg_3day_df = bucket_n_days(weight_agg_df, 3)</span>
</span></span><span style=display:flex><span><span style=color:#75715e># food_agg_3day_df  = bucket_n_days(food_agg_df, 3)</span>
</span></span><span style=display:flex><span><span style=color:#75715e># plot_data(food_agg_3day_df, weight_agg_3day_df, start_date, end_date)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Try 7 days</span>
</span></span><span style=display:flex><span>weight_agg_7day_df <span style=color:#f92672>=</span> bucket_n_days(weight_agg_df, <span style=color:#ae81ff>7</span>, aggregate_type<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;mean&#34;</span>)
</span></span><span style=display:flex><span>food_agg_7day_df  <span style=color:#f92672>=</span> bucket_n_days(food_agg_df, <span style=color:#ae81ff>7</span>, aggregate_type<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;mean&#34;</span>)
</span></span><span style=display:flex><span>plot_data(
</span></span><span style=display:flex><span>    food_agg_7day_df,
</span></span><span style=display:flex><span>     weight_agg_7day_df,
</span></span><span style=display:flex><span>     start_date,
</span></span><span style=display:flex><span>     end_date,
</span></span><span style=display:flex><span>     labels<span style=color:#f92672>=</span>{
</span></span><span style=display:flex><span>         <span style=color:#e6db74>&#34;v_labels&#34;</span>: {<span style=color:#e6db74>&#34;2023-01-01&#34;</span>: <span style=color:#e6db74>&#34;ADF starts&#34;</span>},
</span></span><span style=display:flex><span>         <span style=color:#e6db74>&#34;food_label&#34;</span>: <span style=color:#e6db74>&#34;Calories 7 day mean&#34;</span>,
</span></span><span style=display:flex><span>         <span style=color:#e6db74>&#34;weight_label&#34;</span>: <span style=color:#e6db74>&#34;Weight (lb) 7 day mean&#34;</span>,
</span></span><span style=display:flex><span>     },
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Sum agg instead</span>
</span></span><span style=display:flex><span>food_agg_7day_df  <span style=color:#f92672>=</span> bucket_n_days(food_agg_df, <span style=color:#ae81ff>7</span>, aggregate_type<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;sum&#34;</span>)
</span></span><span style=display:flex><span>plot_data(
</span></span><span style=display:flex><span>    food_agg_7day_df,
</span></span><span style=display:flex><span>     weight_agg_7day_df,
</span></span><span style=display:flex><span>     start_date,
</span></span><span style=display:flex><span>     end_date,
</span></span><span style=display:flex><span>     labels<span style=color:#f92672>=</span>{
</span></span><span style=display:flex><span>         <span style=color:#e6db74>&#34;v_labels&#34;</span>: {<span style=color:#e6db74>&#34;2023-01-01&#34;</span>: <span style=color:#e6db74>&#34;ADF starts&#34;</span>},
</span></span><span style=display:flex><span>         <span style=color:#e6db74>&#34;food_label&#34;</span>: <span style=color:#e6db74>&#34;Calories 7 day sum&#34;</span>,
</span></span><span style=display:flex><span>         <span style=color:#e6db74>&#34;weight_label&#34;</span>: <span style=color:#e6db74>&#34;Weight (lb) 7 day mean&#34;</span>,
</span></span><span style=display:flex><span>     },
</span></span><span style=display:flex><span>)
</span></span></code></pre></div><p>I am doing the version control on <a href=https://github.com/namoopsoo/fasting-analyze/blob/main/2023-03-18-notebook.py>github</a>, too.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://michal.piekarczyk.xyz/tags/fasting/>fasting</a></li><li><a href=https://michal.piekarczyk.xyz/tags/nutrition/>nutrition</a></li></ul><nav class=paginav><a class=prev href=https://michal.piekarczyk.xyz/post/2023-01-29-lang-chain-quick-look/><span class=title>« Prev</span><br><span>Quick lang chain test drive</span></a>
<a class=next href=https://michal.piekarczyk.xyz/post/2023-03-18-hugo-columns-papermod-migrate-theme/><span class=title>Next »</span><br><span>adjustments when migrating to hugo paper mod theme</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://michal.piekarczyk.xyz/>michal.piekarczyk.xyz</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>