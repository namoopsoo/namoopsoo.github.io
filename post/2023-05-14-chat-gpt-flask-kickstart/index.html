<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Using ChatGPT to kickstart a flask app? | michal.piekarczyk.xyz</title><meta name=keywords content><meta name=description content="Context Per an earlier on-going interlude, I&rsquo;ve been trying to more easily curate the photos I care to reference in passing in a conversation. This started out as deduping photos and splitting out the photos of food, but at some point I realized I have so many photos I take as notes, taking those out by hand was getting tedious. I used this as an opportunity to test chat GPT&rsquo;s code-generating skills."><meta name=author content="Michal Piekarczyk"><link rel=canonical href=https://michal.piekarczyk.xyz/post/2023-05-14-chat-gpt-flask-kickstart/><link crossorigin=anonymous href=/assets/css/stylesheet.dd867d536fb6202811c1ee15fa181ef8945826662b49d3016ac91365a2621d58.css integrity="sha256-3YZ9U2+2ICgRwe4V+hge+JRYJmYrSdMBaskTZaJiHVg=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://michal.piekarczyk.xyz/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://michal.piekarczyk.xyz/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://michal.piekarczyk.xyz/favicon-32x32.png><link rel=apple-touch-icon href=https://michal.piekarczyk.xyz/apple-touch-icon.png><link rel=mask-icon href=https://michal.piekarczyk.xyz/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-74MK08REDT"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-74MK08REDT",{anonymize_ip:!1})}</script><meta property="og:title" content="Using ChatGPT to kickstart a flask app?"><meta property="og:description" content="Context Per an earlier on-going interlude, I&rsquo;ve been trying to more easily curate the photos I care to reference in passing in a conversation. This started out as deduping photos and splitting out the photos of food, but at some point I realized I have so many photos I take as notes, taking those out by hand was getting tedious. I used this as an opportunity to test chat GPT&rsquo;s code-generating skills."><meta property="og:type" content="article"><meta property="og:url" content="https://michal.piekarczyk.xyz/post/2023-05-14-chat-gpt-flask-kickstart/"><meta property="article:section" content="post"><meta property="article:published_time" content="2023-05-04T00:00:00+00:00"><meta property="article:modified_time" content="2023-05-04T00:00:00+00:00"><meta property="og:site_name" content="michal.piekarczyk.xyz"><meta name=twitter:card content="summary"><meta name=twitter:title content="Using ChatGPT to kickstart a flask app?"><meta name=twitter:description content="Context Per an earlier on-going interlude, I&rsquo;ve been trying to more easily curate the photos I care to reference in passing in a conversation. This started out as deduping photos and splitting out the photos of food, but at some point I realized I have so many photos I take as notes, taking those out by hand was getting tedious. I used this as an opportunity to test chat GPT&rsquo;s code-generating skills."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://michal.piekarczyk.xyz/post/"},{"@type":"ListItem","position":2,"name":"Using ChatGPT to kickstart a flask app?","item":"https://michal.piekarczyk.xyz/post/2023-05-14-chat-gpt-flask-kickstart/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Using ChatGPT to kickstart a flask app?","name":"Using ChatGPT to kickstart a flask app?","description":"Context Per an earlier on-going interlude, I\u0026rsquo;ve been trying to more easily curate the photos I care to reference in passing in a conversation. This started out as deduping photos and splitting out the photos of food, but at some point I realized I have so many photos I take as notes, taking those out by hand was getting tedious. I used this as an opportunity to test chat GPT\u0026rsquo;s code-generating skills.","keywords":[],"articleBody":"Context Per an earlier on-going interlude, I’ve been trying to more easily curate the photos I care to reference in passing in a conversation. This started out as deduping photos and splitting out the photos of food, but at some point I realized I have so many photos I take as notes, taking those out by hand was getting tedious. I used this as an opportunity to test chat GPT’s code-generating skills.\nBasically, I asked for a web interface around a flask app to help me out. Here was my prompt\ncan you please write a minimal simple python flask web app called “app.py” that will read a folder on my laptop that contains image files and has a simple REST API interface where GET will return the filename of a single image as json, say ‘{“filename”: “some_file.jpg”}’ and a POST will take a json input with a filename key and choice key for example like ‘{“filename”: “some_file.jpg”, “choice”: “some_choice”}’ and the “app.py” will move “some_file.jpg” into another folder named “some_choice”. And then please create a minimal single page html5 app called “choose_front_end.html” that can interact with the REST API of the flask app “app.py” previously described using the REST API GET and POST interface. I want to be able to open the “choose_front_end.html” in my web browser and have the GET API be called on “app.py” and I want to see the next image to get displayed and I want to be able to write into a text box a choice and I want then that choice that I write to be submitted as part of a POST to “app.py” . I want to be able to run both the flask “app.py” and the “choose_front_end.html” locally on my laptop on localhost.\nAnd the response was pretty cool, with an app.py and choose_front_end.html like I asked,\nalong with some helpful instructions on how to use this more or less.\nHowever, when I started test driving this, I realized some initial issues. First I noticed actually perhaps because of the output size limitations of the free version, the choose_front_end.html file was actually cut off in the middle, so I got the displayNextImage func but the submitChoice func was without a body.\nI also started testing out just the GET part since I did have the full app.py of the flask app, however this did not run because yea of course CORS was not setup here. And CORS is one of those notoriously difficult pieces of boilerplate to setup in any client server application communication even if you are just debugging something locally on your laptop.\nAccess to fetch at 'http://127.0.0.1:5000/' from origin 'null' has been blocked by CORS policy: No 'Access-Control-Allow-Origin' header is present on the requested resource. If an opaque response serves your needs, set the request's mode to 'no-cors' to fetch the resource with CORS disabled. I had setup CORS within many web frameworks in the past but I have trouble with this every time. But after a bit of troubleshooting, I stumbled upon the fact that flask actually has some built-in CORS functionality syntactic sugar and I took advantage of that nicely!\nIf you pip install, pip install flask-cors, you can basically do the CORS part with the few additional lines at the top here, from flask_cors import CORS app = Flask(\"blah\") CORS(app) @app.route(\"/\", methods=[\"GET\"]) def get_image(): return make_response({\"blah\": \"blah\"}) def make_response(data): str_payload = json.dumps(data) mimetype = \"application/json\" response = flask.Response(response=str_payload, status=200, mimetype=mimetype) # response.headers[\"Access-Control-Allow-Origin\"] = \"*\" # CORS_ORIGIN_ALLOW_ALL = True? # response.headers[\"Content-Type\"] = \"application/json\" return response Ultimately after building out a good bit of functionality additional I did not realize I also wanted, I ended up with a solution I was able to run from my laptop and access from my ipad, for convenience, Definitely skipped a lot of details here! But will update more here later.\n","wordCount":"640","inLanguage":"en","datePublished":"2023-05-04T00:00:00Z","dateModified":"2023-05-04T00:00:00Z","author":{"@type":"Person","name":"Michal Piekarczyk"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://michal.piekarczyk.xyz/post/2023-05-14-chat-gpt-flask-kickstart/"},"publisher":{"@type":"Organization","name":"michal.piekarczyk.xyz","logo":{"@type":"ImageObject","url":"https://michal.piekarczyk.xyz/favicon.ico"}}}</script></head><body class=dark id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://michal.piekarczyk.xyz/ accesskey=h title="michal.piekarczyk.xyz (Alt + H)">michal.piekarczyk.xyz</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://michal.piekarczyk.xyz/post/ title=posts><span>posts</span></a></li><li><a href=https://michal.piekarczyk.xyz/project/ title=projects><span>projects</span></a></li><li><a href=https://michal.piekarczyk.xyz/handy/ title=handy><span>handy</span></a></li><li><a href=https://michal.piekarczyk.xyz/search/ title="search (Alt + /)" accesskey=/><span>search</span></a></li><li><a href=https://michal.piekarczyk.xyz/about/ title=about><span>about</span></a></li><li><a href=https://world.hey.com/michal.piekarczyk title=frivolity><span>frivolity</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://michal.piekarczyk.xyz/>Home</a>&nbsp;»&nbsp;<a href=https://michal.piekarczyk.xyz/post/>Posts</a></div><h1 class=post-title>Using ChatGPT to kickstart a flask app?</h1><div class=post-meta><span title='2023-05-04 00:00:00 +0000 UTC'>May 4, 2023</span>&nbsp;·&nbsp;4 min&nbsp;·&nbsp;640 words&nbsp;·&nbsp;Michal Piekarczyk</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#context>Context</a></li><li><a href=#basically-i-asked-for-a-web-interface-around-a-flask-app-to-help-me-out>Basically, I asked for a web interface around a flask app to help me out.</a></li><li><a href=#however-when-i-started-test-driving-this-i-realized-some-initial-issues>However, when I started test driving this, I realized some initial issues.</a></li><li><a href=#i-also-started-testing-out-just-the-get-part-since-i-did-have-the-full-apppy-of-the-flask-app-however-this-did-not-run-because-yea-of-course-cors-was-not-setup-here>I also started testing out just the <code>GET</code> part since I did have the full <code>app.py</code> of the flask app, however this did not run because yea of course CORS was not setup here.</a><ul><li><a href=#if-you-pip-install-pip-install-flask-cors-you-can-basically-do-the-cors-part-with-the-few-additional-lines-at-the-top-here>If you pip install, <code>pip install flask-cors</code>, you can basically do the CORS part with the few additional lines at the top here,</a></li></ul></li><li><a href=#ultimately-after-building-out-a-good-bit-of-functionality-additional-i-did-not-realize-i-also-wanted-i-ended-up-with-a-solution-i-was-able-to-run-from-my-laptop-and-access-from-my-ipad-for-convenience>Ultimately after building out a good bit of functionality additional I did not realize I also wanted, I ended up with a solution I was able to run from my laptop and access from my ipad, for convenience,</a></li></ul></nav></div></details></div><div class=post-content><h2 id=context>Context<a hidden class=anchor aria-hidden=true href=#context>#</a></h2><p>Per an <a href=https://michal.piekarczyk.xyz/post/2022-11-12-food-not-food/>earlier on-going interlude</a>, I&rsquo;ve been trying to more easily curate the photos I care to reference in passing in a conversation. This started out as <a href=https://github.com/namoopsoo/manage-my-photos>deduping photos and splitting out the photos of food</a>, but at some point I realized I have so many photos I take as notes, taking those out by hand was getting tedious. I used this as an opportunity to test chat GPT&rsquo;s code-generating skills.</p><h2 id=basically-i-asked-for-a-web-interface-around-a-flask-app-to-help-me-out>Basically, I asked for a web interface around a flask app to help me out.<a hidden class=anchor aria-hidden=true href=#basically-i-asked-for-a-web-interface-around-a-flask-app-to-help-me-out>#</a></h2><p>Here was my prompt</p><blockquote><p>can you please write a minimal simple python flask web app called &ldquo;app.py&rdquo; that will read a folder on my laptop that contains image files and has a simple REST API interface where GET will return the filename of a single image as json, say &lsquo;{&ldquo;filename&rdquo;: &ldquo;some_file.jpg&rdquo;}&rsquo; and a POST will take a json input with a filename key and choice key for example like &lsquo;{&ldquo;filename&rdquo;: &ldquo;some_file.jpg&rdquo;, &ldquo;choice&rdquo;: &ldquo;some_choice&rdquo;}&rsquo; and the &ldquo;app.py&rdquo; will move &ldquo;some_file.jpg&rdquo; into another folder named &ldquo;some_choice&rdquo;. And then please create a minimal single page html5 app called &ldquo;choose_front_end.html&rdquo; that can interact with the REST API of the flask app &ldquo;app.py&rdquo; previously described using the REST API GET and POST interface. I want to be able to open the &ldquo;choose_front_end.html&rdquo; in my web browser and have the GET API be called on &ldquo;app.py&rdquo; and I want to see the next image to get displayed and I want to be able to write into a text box a choice and I want then that choice that I write to be submitted as part of a POST to &ldquo;app.py&rdquo; . I want to be able to run both the flask &ldquo;app.py&rdquo; and the &ldquo;choose_front_end.html&rdquo; locally on my laptop on localhost.</p></blockquote><p>And the response was pretty cool, with an <code>app.py</code> and <code>choose_front_end.html</code> like I asked,</p><pre><code>          <figure>
                  <img loading=lazy src=https://s3.amazonaws.com/my-blog-content/2023/2023-05-04-Using-ChatGPT-to-kickstart-a-flask-app%3F/image_1684112637599_0.png width=150%> 
              </figure>


          <figure>
                  <img loading=lazy src=https://s3.amazonaws.com/my-blog-content/2023/2023-05-04-Using-ChatGPT-to-kickstart-a-flask-app%3F/image_1684112678401_0.png width=150%> 
              </figure>

</code></pre><p>along with some helpful instructions on how to use this more or less.</p><h2 id=however-when-i-started-test-driving-this-i-realized-some-initial-issues>However, when I started test driving this, I realized some initial issues.<a hidden class=anchor aria-hidden=true href=#however-when-i-started-test-driving-this-i-realized-some-initial-issues>#</a></h2><p>First I noticed actually perhaps because of the output size limitations of the free version, the <code>choose_front_end.html</code> file was actually cut off in the middle, so I got the <code>displayNextImage</code> func but the <code>submitChoice</code> func was without a body.</p><h2 id=i-also-started-testing-out-just-the-get-part-since-i-did-have-the-full-apppy-of-the-flask-app-however-this-did-not-run-because-yea-of-course-cors-was-not-setup-here>I also started testing out just the <code>GET</code> part since I did have the full <code>app.py</code> of the flask app, however this did not run because yea of course CORS was not setup here.<a hidden class=anchor aria-hidden=true href=#i-also-started-testing-out-just-the-get-part-since-i-did-have-the-full-apppy-of-the-flask-app-however-this-did-not-run-because-yea-of-course-cors-was-not-setup-here>#</a></h2><p>And CORS is one of those notoriously difficult pieces of boilerplate to setup in any client server application communication even if you are just debugging something locally on your laptop.</p><figure><img loading=lazy src=https://s3.amazonaws.com/my-blog-content/2023/2023-05-04-Using-ChatGPT-to-kickstart-a-flask-app%3F/image_1681606890326_0.png width=100%></figure><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>  Access to fetch at <span style=color:#e6db74>&#39;http://127.0.0.1:5000/&#39;</span> from origin <span style=color:#e6db74>&#39;null&#39;</span> has been blocked 
</span></span><span style=display:flex><span>  by CORS policy: No <span style=color:#e6db74>&#39;Access-Control-Allow-Origin&#39;</span> header is present on the 
</span></span><span style=display:flex><span>  requested resource. If an opaque response serves your needs, set the 
</span></span><span style=display:flex><span>  request<span style=color:#e6db74>&#39;s mode to &#39;</span>no-cors<span style=color:#960050;background-color:#1e0010>&#39;</span> to fetch the resource with CORS disabled.
</span></span></code></pre></div><p>I had setup CORS within many web frameworks in the past but I have trouble with this every time. But after a bit of troubleshooting, I stumbled upon the fact that <code>flask</code> actually has some built-in CORS functionality syntactic sugar and I took advantage of that nicely!</p><h3 id=if-you-pip-install-pip-install-flask-cors-you-can-basically-do-the-cors-part-with-the-few-additional-lines-at-the-top-here>If you pip install, <code>pip install flask-cors</code>, you can basically do the CORS part with the few additional lines at the top here,<a hidden class=anchor aria-hidden=true href=#if-you-pip-install-pip-install-flask-cors-you-can-basically-do-the-cors-part-with-the-few-additional-lines-at-the-top-here>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> flask_cors <span style=color:#f92672>import</span> CORS
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>app <span style=color:#f92672>=</span> Flask(<span style=color:#e6db74>&#34;blah&#34;</span>)
</span></span><span style=display:flex><span>CORS(app)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@app.route</span>(<span style=color:#e6db74>&#34;/&#34;</span>, methods<span style=color:#f92672>=</span>[<span style=color:#e6db74>&#34;GET&#34;</span>])
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>get_image</span>():
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> make_response({<span style=color:#e6db74>&#34;blah&#34;</span>: <span style=color:#e6db74>&#34;blah&#34;</span>})
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>make_response</span>(data):
</span></span><span style=display:flex><span>  str_payload <span style=color:#f92672>=</span> json<span style=color:#f92672>.</span>dumps(data)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  mimetype <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;application/json&#34;</span>
</span></span><span style=display:flex><span>  response <span style=color:#f92672>=</span> flask<span style=color:#f92672>.</span>Response(response<span style=color:#f92672>=</span>str_payload,
</span></span><span style=display:flex><span>                            status<span style=color:#f92672>=</span><span style=color:#ae81ff>200</span>,
</span></span><span style=display:flex><span>                            mimetype<span style=color:#f92672>=</span>mimetype)
</span></span><span style=display:flex><span>  <span style=color:#75715e># response.headers[&#34;Access-Control-Allow-Origin&#34;] = &#34;*&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># CORS_ORIGIN_ALLOW_ALL = True?</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># response.headers[&#34;Content-Type&#34;] = &#34;application/json&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> response
</span></span></code></pre></div><h2 id=ultimately-after-building-out-a-good-bit-of-functionality-additional-i-did-not-realize-i-also-wanted-i-ended-up-with-a-solution-i-was-able-to-run-from-my-laptop-and-access-from-my-ipad-for-convenience>Ultimately after building out a good bit of functionality additional I did not realize I also wanted, I ended up with a solution I was able to run from my laptop and access from my ipad, for convenience,<a hidden class=anchor aria-hidden=true href=#ultimately-after-building-out-a-good-bit-of-functionality-additional-i-did-not-realize-i-also-wanted-i-ended-up-with-a-solution-i-was-able-to-run-from-my-laptop-and-access-from-my-ipad-for-convenience>#</a></h2><figure><img loading=lazy src=https://s3.amazonaws.com/my-blog-content/2023/2023-05-04-Using-ChatGPT-to-kickstart-a-flask-app%3F/IMG_2585_1684089122525_0.jpeg width=70%></figure><p>Definitely skipped a lot of details here! But will update more here later.</p></div><footer class=post-footer><ul class=post-tags></ul><nav class=paginav><a class=prev href=https://michal.piekarczyk.xyz/post/2023-01-29-lang-chain-quick-look/><span class=title>« Prev</span><br><span>Quick lang chain test drive</span></a>
<a class=next href=https://michal.piekarczyk.xyz/post/2023-04-13-gh-pages-and-dates/><span class=title>Next »</span><br><span>Run forever!</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://michal.piekarczyk.xyz/>michal.piekarczyk.xyz</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>