<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Time Parser Project | michal.piekarczyk.xyz</title><meta name=keywords content><meta name=description content="This is a simple personal time tracker built with clojure, aws lambda and dynamodb,  inspired by Laura Vanderkam&rsquo;s &ldquo;168 Hours&rdquo; book"><meta name=author content="Michal Piekarczyk"><link rel=canonical href=https://michal.piekarczyk.xyz/project/time-parser/time-parser-project/><link crossorigin=anonymous href=/assets/css/stylesheet.dd867d536fb6202811c1ee15fa181ef8945826662b49d3016ac91365a2621d58.css integrity="sha256-3YZ9U2+2ICgRwe4V+hge+JRYJmYrSdMBaskTZaJiHVg=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://michal.piekarczyk.xyz/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://michal.piekarczyk.xyz/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://michal.piekarczyk.xyz/favicon-32x32.png><link rel=apple-touch-icon href=https://michal.piekarczyk.xyz/apple-touch-icon.png><link rel=mask-icon href=https://michal.piekarczyk.xyz/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-74MK08REDT"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-74MK08REDT",{anonymize_ip:!1})}</script><meta property="og:title" content="Time Parser Project"><meta property="og:description" content="This is a simple personal time tracker built with clojure, aws lambda and dynamodb,  inspired by Laura Vanderkam&rsquo;s &ldquo;168 Hours&rdquo; book"><meta property="og:type" content="article"><meta property="og:url" content="https://michal.piekarczyk.xyz/project/time-parser/time-parser-project/"><meta property="og:image" content="https://my-blog-content.s3.amazonaws.com/2020/02/2020-02-27+10.38.52-timeparse.jpg"><meta property="article:section" content="project"><meta property="article:published_time" content="2018-02-11T19:39:35-04:00"><meta property="article:modified_time" content="2018-02-11T19:39:35-04:00"><meta property="og:site_name" content="michal.piekarczyk.xyz"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://my-blog-content.s3.amazonaws.com/2020/02/2020-02-27+10.38.52-timeparse.jpg"><meta name=twitter:title content="Time Parser Project"><meta name=twitter:description content="This is a simple personal time tracker built with clojure, aws lambda and dynamodb,  inspired by Laura Vanderkam&rsquo;s &ldquo;168 Hours&rdquo; book"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Side Projects","item":"https://michal.piekarczyk.xyz/project/"},{"@type":"ListItem","position":2,"name":"Time Parser Project","item":"https://michal.piekarczyk.xyz/project/time-parser/time-parser-project/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Time Parser Project","name":"Time Parser Project","description":"This is a simple personal time tracker built with clojure, aws lambda and dynamodb,  inspired by Laura Vanderkam\u0026rsquo;s \u0026ldquo;168 Hours\u0026rdquo; book","keywords":[],"articleBody":"https://github.com/namoopsoo/time-parser\nTable of Contents What Input data Output example Architecture overview Can I use this? What This is a simple time tracker lambda and DynamoDB based service, built as a project to learn clojure and micro services. The initial inspiration came from reading the book 168 Hours, in which Laura Vanderkam asks us to really see what we are doing with our time. There are 168 hours in a week and her claim is that although we feel we never have enough time, journaling what we do is a means to bullshit test ourselves.\nInput data We split our time between personal and work universes. (Actually this project doesnt care how you divide your life, but the first term, below, is a “core-category” ) … And furthermore we bring our attention to either specific Projects, which have a beginning and an end, such as the below taxes-2017–hopefully one day I will finish my taxes–and adhoc tasks which is meant to record time spent helping a colleague for example (here called consulting, below). routine is a potentially useful –or not– distinction of things we do which do not have an End. times 2018-02-10 10:00 - 10:30 ; personal ; taxes-2017 ; plan ; just starting out 10:30 - 11:05 ; personal ; routine ; yoga 11:35 - 12:20 ; work ; WRK-345-bugfix-foo ; code 12:20 - 13:05 ; work ; adhoc ; consulting 13:05 - 13:35 ; work ; WRK-345-bugfix-foo ; code Output example Here is an example of an output stacked area chart of a core-category:work query, which is using the author’s data from December of 2017. This uses the d3js so called stacked layout. The y-axis represents minutes. This chart is not labeled, but it is possible to see that some days in the week of December 4th had multiple competing interests, while the week of Dec 11th there was a bit more focus on the Purple project. This particular layout only allows for a max of 20 layers before colors are re-used for other categories. a lot can be said about stacked area chart aesthetics. Architecture overview Here’s a super simple overview. There are several lambdas at play here, but the general picture looks like this.\nHere, crontab -l shows how an upload script runs every 20 minutes # crontab -l */20 * * * * bash /path/to/my/local/repo/timesheet-parser/clojure-time/timeparse.upload.sh and the timeparse.upload.sh is a one liner that does… sh -c 'source /local/path/to/my/environmental/variables.sh \\ \u0026\u0026 source /local/path/to/my/python/environment/thing/bin/activate \\ \u0026\u0026 python /path/to/my/local/repo/timesheet-parser/scripts/upload_client.py times /local/path/to/my/Dropbox/my/dir/with/time/data' Can I use this? This service has not yet been neatly templatized for easy adoption. This for now has been a fun side project proof of concept for helping the author figure out where his time is going.\nProductionizing would happen of course given enough of a demand.\n","wordCount":"461","inLanguage":"en","image":"https://my-blog-content.s3.amazonaws.com/2020/02/2020-02-27+10.38.52-timeparse.jpg","datePublished":"2018-02-11T19:39:35-04:00","dateModified":"2018-02-11T19:39:35-04:00","author":{"@type":"Person","name":"Michal Piekarczyk"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://michal.piekarczyk.xyz/project/time-parser/time-parser-project/"},"publisher":{"@type":"Organization","name":"michal.piekarczyk.xyz","logo":{"@type":"ImageObject","url":"https://michal.piekarczyk.xyz/favicon.ico"}}}</script></head><body class=dark id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://michal.piekarczyk.xyz/ accesskey=h title="michal.piekarczyk.xyz (Alt + H)">michal.piekarczyk.xyz</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://michal.piekarczyk.xyz/post/ title=posts><span>posts</span></a></li><li><a href=https://michal.piekarczyk.xyz/project/ title=projects><span>projects</span></a></li><li><a href=https://michal.piekarczyk.xyz/handy/ title=handy><span>handy</span></a></li><li><a href=https://michal.piekarczyk.xyz/search/ title="search (Alt + /)" accesskey=/><span>search</span></a></li><li><a href=https://michal.piekarczyk.xyz/about/ title=about><span>about</span></a></li><li><a href=https://world.hey.com/michal.piekarczyk title=frivolity><span>frivolity</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://michal.piekarczyk.xyz/>Home</a>&nbsp;»&nbsp;<a href=https://michal.piekarczyk.xyz/project/>Side Projects</a></div><h1 class=post-title>Time Parser Project</h1><div class=post-meta><span title='2018-02-11 19:39:35 -0400 -0400'>111111-11-117</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;461 words&nbsp;·&nbsp;Michal Piekarczyk</div></header><figure class=entry-cover><img loading=lazy src=https://my-blog-content.s3.amazonaws.com/2020/02/2020-02-27+10.38.52-timeparse.jpg alt></figure><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><ul><li><a href=#table-of-contents>Table of Contents</a></li><li><a href=#what>What</a></li><li><a href=#input-data>Input data</a></li><li><a href=#output-example>Output example</a></li><li><a href=#architecture-overview>Architecture overview</a></li><li><a href=#can-i-use-this>Can I use this?</a></li></ul></li></ul></nav></div></details></div><div class=post-content><p><a href=https://github.com/namoopsoo/time-parser>https://github.com/namoopsoo/time-parser</a></p><h3 id=table-of-contents>Table of Contents<a hidden class=anchor aria-hidden=true href=#table-of-contents>#</a></h3><ol><li><a href=#what>What</a></li><li><a href=#input-data>Input data</a></li><li><a href=#output-example>Output example</a></li><li><a href=#architecture-overview>Architecture overview</a></li><li><a href=#can-i-use-this>Can I use this?</a></li></ol><h3 id=what>What<a hidden class=anchor aria-hidden=true href=#what>#</a></h3><p>This is a simple time tracker <a href=https://aws.amazon.com/lambda/>lambda</a> and <a href=https://aws.amazon.com/dynamodb/>DynamoDB</a> based service, built as a project to learn <a href=https://www.braveclojure.com/>clojure</a> and micro services. The initial inspiration came from reading the book <a href=https://lauravanderkam.com/books/168-hours/>168 Hours</a>, in which Laura Vanderkam asks us to really see what we are doing with our time. There are 168 hours in a week and her claim is that although we feel we never have enough time, journaling what we do is a means to bullshit test ourselves.</p><h3 id=input-data>Input data<a hidden class=anchor aria-hidden=true href=#input-data>#</a></h3><ul><li>We split our time between <code>personal</code> and <code>work</code> universes.</li><li><em>(Actually this project doesnt care how you divide your life, but the first term, below, is a &ldquo;core-category&rdquo; )</em></li><li>&mldr;</li><li>And furthermore we bring our attention to either specific <em>Projects</em>, which have a beginning and an end, such as the below <code>taxes-2017</code>&ndash;<em>hopefully one day I will finish my taxes</em>&ndash;and <code>adhoc</code> tasks which is meant to record time spent helping a colleague for example (here called <code>consulting</code>, below).</li><li><code>routine</code> is a potentially useful &ndash;<em>or not</em>&ndash; distinction of things we do which do not have an <em>End</em>.</li></ul><pre tabindex=0><code>		times 2018-02-10

		10:00 - 10:30 ; personal ; taxes-2017 ; plan ; just starting out
		10:30 - 11:05 ; personal ; routine ; yoga
		11:35 - 12:20 ; work ; WRK-345-bugfix-foo ; code
		12:20 - 13:05 ; work ; adhoc ; consulting 
		13:05 - 13:35 ;  work ; WRK-345-bugfix-foo ; code
</code></pre><h3 id=output-example>Output example<a hidden class=anchor aria-hidden=true href=#output-example>#</a></h3><ul><li>Here is an example of an output stacked area chart of a <code>core-category:work</code> query, which is using the author&rsquo;s data from December of 2017. This uses the d3js so called <em>stacked</em> layout. The <em>y-axis</em> represents minutes.</li><li>This chart is not labeled, but it is possible to see that some days in the week of <em>December 4th</em> had multiple competing interests, while the week of <em>Dec 11th</em> there was a bit more focus on the <em>Purple project</em>.</li></ul><ul><li>This particular layout only allows for a max of <code>20</code> layers before colors are re-used for other categories.</li><li><a href=http://leebyron.com/streamgraph/stackedgraphs_byron_wattenberg.pdf>a lot can be said</a> about stacked area chart aesthetics.</li></ul><h3 id=architecture-overview>Architecture overview<a hidden class=anchor aria-hidden=true href=#architecture-overview>#</a></h3><p>Here&rsquo;s a super simple overview. There are several lambdas at play here, but the general picture looks like this.</p><p><img loading=lazy src=images/architecture.png alt=image></p><ul><li>Here, <code>crontab -l</code> shows how an upload script runs every 20 minutes</li></ul><pre tabindex=0><code># crontab -l

*/20 * * * * bash /path/to/my/local/repo/timesheet-parser/clojure-time/timeparse.upload.sh
</code></pre><ul><li>and the <code>timeparse.upload.sh</code> is a one liner that does&mldr;</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sh -c <span style=color:#e6db74>&#39;source /local/path/to/my/environmental/variables.sh  \
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  &amp;&amp; source /local/path/to/my/python/environment/thing/bin/activate \
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  &amp;&amp; python /path/to/my/local/repo/timesheet-parser/scripts/upload_client.py  times /local/path/to/my/Dropbox/my/dir/with/time/data&#39;</span>
</span></span></code></pre></div><h3 id=can-i-use-this>Can I use this?<a hidden class=anchor aria-hidden=true href=#can-i-use-this>#</a></h3><p>This service has not yet been neatly templatized for easy adoption.
This for now has been a fun side project proof of concept for helping <em>the author</em> figure out where his time is going.</p><p>Productionizing would happen of course given enough of a demand.</p></div><footer class=post-footer><ul class=post-tags></ul><nav class=paginav><a class=prev href=https://michal.piekarczyk.xyz/post/2019-03-16--ffmpeg-notes/><span class=title>« Prev</span><br><span>Using ffmpeg to Merge Videos</span></a>
<a class=next href=https://michal.piekarczyk.xyz/post/2018-01-07-plant-hyperlapse/><span class=title>Next »</span><br><span>Some plant time lapse</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://michal.piekarczyk.xyz/>michal.piekarczyk.xyz</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>